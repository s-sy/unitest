{"version":3,"sources":["uni-app:///main.js","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?110b","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?083d","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?431a","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?2a4b","uni-app:///pagestwo/chart/home.vue","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?e161","webpack:///C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/chart/home.vue?4421"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,8F;AACAA,UAAU,CAACC,aAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACc;;;AAGjE;AACqK;AACrK,gBAAgB,+KAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA8lB,CAAgB,wnBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwKlnB;AACA,8F;;AAEA;;AAEA,MAFA,kBAEA;AACA;AACA,oDADA;AAEA,wCAFA;AAGA,oBAHA;AAIA,kBAJA;AAKA;AACA,iBANA;AAOA;AACA,6BARA;AASA,4BATA;AAUA,kBAVA;AAWA,sBAXA;AAYA,iBAZA;AAaA,oBAbA;AAcA,cAdA;;AAgBA;;AAEA;AACA,wCAnBA;;AAqBA,oBArBA;AAsBA,uBAtBA;AAuBA,4BAvBA;AAwBA,sBAxBA;AAyBA,qBAzBA;AA0BA,wCA1BA;AA2BA,uBA3BA;AA4BA,qBA5BA;;AA8BA;AACA,0CA/BA;AAgCA,qBAhCA;AAiCA,sBAjCA;AAkCA;AACA,yBAnCA;AAoCA;AACA,oBArCA;AAsCA;AACA,qBAvCA;AAwCA;AACA,g0BADA;AAEA,k0BAFA;AAGA,o0BAHA;AAIA,g1BAJA;AAKA,80BALA,CAxCA;;AA+CA;AACA,68FAhDA;AAiDA;AACA,sBAlDA;AAmDA;AACA,iBADA,EACA;AACA,kBAFA;AAGA,kBAHA;AAIA,sBAJA;AAKA,mBALA,EAnDA;;;AA2DA,GA9DA;;AAgEA,UAhEA,sBAgEA;AACA;AACA;AACA;AACA,GApEA;AAqEA,QArEA,kBAqEA,MArEA,EAqEA;AACA;;AAEA;;AAEA,GA1EA;AA2EA,QA3EA,oBA2EA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,GA7FA;;AA+FA;AACA,WADA,qBACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;AAMA,OAPA;AAQA,KAXA;AAYA,oBAZA,8BAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAJA;AAKA,OANA;AAOA,KAtBA;AAuBA,eAvBA,yBAuBA;AACA,oBADA,GACA,KADA;AAEA;AACA;AACA;AACA;AACA;AACA,sCAPA;AAQA,gCARA,SAQA,IARA;AASA,wCATA,SASA,SATA;AAUA,uCAVA;AAWA,iCAXA;AAYA;AACA;AACA,uCAdA;AAeA,yCAfA,UAeA,eAfA;AAgBA,gCAhBA,UAgBA,IAhBA;AAiBA,wCAjBA,UAiBA,SAjBA;;AAmBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAFA;;AAIA;AACA;AACA;AACA,mBAFA;AAGA;AACA;AACA;AACA,mBAFA;;;;AAMA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AArDA,4EAsDA,CA7EA;AA8EA;AACA,aA/EA,qBA+EA,IA/EA,EA+EA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBANA;;AAQA,OAVA,MAUA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAZA;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA;AAIA,KA1HA;;AA4HA;AACA,eA7HA,uBA6HA,CA7HA,EA6HA;AACA;AACA;AACA;AACA,mCAJA,CAIA;AACA,mCALA,CAKA;AACA,sCANA,CAMA;AACA;AACA;;AAEA;AACA;AACA,2CADA,CACA;AACA;AACA,sCADA,CACA;AACA,SAFA;;AAIA,OANA;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,KA7KA;AA8KA;AACA,mBA/KA,6BA+KA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,SArBA;;AAuBA,OAxBA;AAyBA,KA9MA;AA+MA,cA/MA,wBA+MA;AACA,oBADA,GACA,MADA;;AAGA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAFA;;AAIA,iBAPA,EA/BA;AAuCA,KAtPA;AAuPA;AACA,cAxPA,sBAwPA,OAxPA,EAwPA;AACA;AACA,iCAFA,CAEA;AACA,iCAHA,CAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAlQA;;AAoQA;AACA,YArQA,sBAqQA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA,KA9QA;AA+QA;AACA,cAhRA,wBAgRA;AACA;AACA,KAlRA;AAmRA;AACA,cApRA,wBAoRA;AACA;AACA;AACA;AACA;AACA,OAHA,EAGA,GAHA;AAIA,KA1RA;AA2RA;AACA,eA5RA,yBA4RA;AACA;AACA,KA9RA;AA+RA;AACA,UAhSA,oBAgSA;AACA;AACA,KAlSA;AAmSA;AACA,oBApSA,8BAoSA;AACA;AACA,8BADA;;AAGA;AACA,KAzSA;AA0SA;AACA,YA3SA,oBA2SA,IA3SA,EA2SA;AACA;AACA;AACA;AACA,0BADA;AAEA,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EA6sBA;AACA;AACA;AACA;AACA;AACA;AACA,mBADA;AAEA,6BAFA;;AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCADA;AAEA,+BAFA;AAGA,kCAHA;AAIA,sBAJA;AAKA,2BALA;AAMA;AACA,+DADA;AAEA,6DAFA,EANA;;AAUA;AACA,2BADA;AAEA,6BAFA,EAVA;;AAcA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gDADA;AAEA,uBAFA;AAGA,+BAHA;AAIA,4BAJA,EAIA;AACA,yCALA;AAMA,qCANA;AAOA,8FAPA;AAQA,yBARA;AASA,mCATA;;;AAYA;AACA;AACA;AACA,WArCA;;;AAwCA,OAtDA,MAsDA;AACA;AACA;AACA;AACA,KA1wBA;AA2wBA;AACA,eA5wBA,yBA4wBA;AACA;AACA;AACA,KA/wBA;AAgxBA,WAhxBA,qBAgxBA;AACA;AACA,KAlxBA;AAmxBA,aAnxBA,qBAmxBA,WAnxBA,EAmxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,oBAFA;AAGA,wDAHA;AAIA,kCAJA;AAKA,uBALA;AAMA,WANA,EAMA,IANA,CAMA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,OAfA;AAgBA,KAzyBA;AA0yBA,gBA1yBA,0BA0yBA;AACA;AACA;AACA;AACA;AACA;AACA,iCADA;AAEA,kCAFA;AAGA,yBAHA;AAIA,mCAJA;AAKA,WALA,EAKA,IALA,CAKA;AACA;AACA;AACA,OARA;AASA,KAxzBA;AAyzBA,YAzzBA,oBAyzBA,WAzzBA,EAyzBA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,oBAFA;AAGA,iCAHA;AAIA,kCAJA;AAKA,uBALA;AAMA,WANA,EAMA,IANA,CAMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,gDAFA;AAGA,sCAHA;AAIA,8CAJA;AAKA,kDALA;AAMA,uGANA;AAOA,iGAPA;AAQA,kDARA;AASA,0CATA;;AAWA;AACA;AACA;AACA;AACA;AACA;AACA,OAhCA;AAiCA,KAt2BA;;;AAy2BA;;;AAGA,WA52BA,qBA42BA;AACA;AACA,KA92BA;AA+2BA;;;AAGA,cAl3BA,sBAk3BA,EAl3BA,EAk3BA;AACA;AACA,KAp3BA;AAq3BA;;;AAGA,aAx3BA,uBAw3BA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,KAh4BA;AAi4BA;;;AAGA,eAp4BA,yBAo4BA;AACA;AACA,KAt4BA;;AAw4BA,gBAx4BA,wBAw4BA,IAx4BA,EAw4BA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;AAEA,wBAFA;AAGA,mBAHA;AAIA,wBAJA;AAKA,0BALA;AAMA,0BANA;AAOA,4BAPA;AAQA,4FARA;AASA,uBATA;;;;AAaA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCADA;AAEA,+IAFA;AAGA,qBAHA;AAIA,uCAJA;AAKA,wCALA;AAMA,iDANA;AAOA,6CAPA;AAQA,8FARA;AASA,yBATA;;AAWA;AACA;AACA;AACA,SAxCA,MAwCA;AACA;AACA;AACA;AACA;AACA;AACA,qBADA;AAEA,0BAFA;AAGA,qBAHA;AAIA,0BAJA;AAKA,4BALA;AAMA,4BANA;AAOA,8BAPA;AAQA,8FARA;AASA,yBATA;;;AAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCADA;AAEA,iJAFA;AAGA,uBAHA;AAIA,yCAJA;AAKA,0CALA;AAMA,mDANA;AAOA,+CAPA;AAQA,gGARA;AASA,2BATA;;AAWA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,KAj/BA;AAk/BA,UAl/BA,kBAk/BA,IAl/BA,EAk/BA;AACA;AACA;;AAEA;AACA,KAv/BA;AAw/BA,SAx/BA,iBAw/BA,IAx/BA,EAw/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA;AAEA,sBAFA;AAGA,iBAHA;AAIA,sBAJA;AAKA,wBALA;AAMA,wBANA;AAOA,0BAPA;AAQA,6FARA;AASA,qBATA;;AAWA;AACA;;AAEA;;;AAGA,KAthCA;AAuhCA,UAvhCA,kBAuhCA,IAvhCA,EAuhCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBADA;AAEA,sBAFA;AAGA,iBAHA;AAIA,sBAJA;AAKA,wBALA;AAMA,wBANA;AAOA,0BAPA;AAQA,0FARA;AASA,qBATA;;AAWA;AACA;AACA;;;;AAIA,KApjCA;AAqjCA,eArjCA,uBAqjCA,IArjCA,EAqjCA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,qCADA;AAEA,iCAFA;AAGA,2BAHA;AAIA,6BAJA;AAKA,kCALA;AAMA,uCANA;AAOA,mCAPA;AAQA,wFARA;AASA,mBATA;;AAWA;AACA;AACA,KA5kCA;AA6kCA;;;;AAIA,WAjlCA,mBAilCA,IAjlCA,EAilCA;AACA;AACA;AACA;AACA,KArlCA;AAslCA;;;AAGA,QAzlCA,gBAylCA,OAzlCA,EAylCA;AACA;AACA;;AAEA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gCADA;AAEA,0BAFA;AAGA,sCAHA;AAIA,kCAJA;AAKA,qBALA;AAMA;AACA,kCAPA;;AASA,KAhnCA,EA/FA,E;;;;;;;;;;;;;AC3KA;AAAA;AAAA;AAAA;AAAgmC,CAAgB,0kCAAG,EAAC,C;;;;;;;;;;;ACApnC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pagestwo/chart/home.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pagestwo/chart/home.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./home.vue?vue&type=template&id=18f7318e&\"\nvar renderjs\nimport script from \"./home.vue?vue&type=script&lang=js&\"\nexport * from \"./home.vue?vue&type=script&lang=js&\"\nimport style0 from \"./home.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pagestwo/chart/home.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=template&id=18f7318e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=script&lang=js&\"","<!-- 700 -->\r\n<template>\r\n\t<view>\r\n\t\t<cu-custom bgColor=\"bg-white\" :isBack=\"true\" :ischart=\"false\">\r\n\t\t\t<block slot=\"backText\"></block>\r\n\t\t\t<block slot=\"content\" class=\"title-text\">联系客服</block>\r\n\t\t</cu-custom>\r\n\t\t<view class=\"\" v-if=\"!wxUser.phone\"><auth @refData=\"userInfoGet\" :showText=\"'微信一键登录'\"></auth></view>\r\n\t\t<view class=\"\" v-if=\"wxUser.phone\">\r\n\t\t\t\r\n\t\t\r\n\t\t<view class=\"content\" @touchstart=\"hideDrawer\">\r\n\t\t\t<scroll-view class=\"msg-list\" scroll-y=\"true\" :scroll-with-animation=\"scrollAnimation\" :scroll-top=\"scrollTop\"\r\n\t\t\t :scroll-into-view=\"scrollToView\" @scrolltoupper=\"loadHistory\" upper-threshold=\"50\">\r\n\t\t\t\t<!-- 加载历史数据waitingUI -->\r\n\t\t\t\t<view class=\"loading\">\r\n\t\t\t\t\t<view class=\"spinner\">\r\n\t\t\t\t\t\t<view class=\"rect1\"></view>\r\n\t\t\t\t\t\t<view class=\"rect2\"></view>\r\n\t\t\t\t\t\t<view class=\"rect3\"></view>\r\n\t\t\t\t\t\t<view class=\"rect4\"></view>\r\n\t\t\t\t\t\t<view class=\"rect5\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<view class=\"row\" v-for=\"(row,index) in msgList\" :key=\"index\" :id=\"'msg'+ row.id\">\r\n\t\t\t\t\t<!-- 系统消息 -->\r\n\t\t\t\t\t<block v-if=\"row.type=='5'\">\r\n\t\t\t\t\t\t<view class=\"system\">\r\n\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\t\t\t\t\t\t\t<view v-if=\"row.type=='5'\" class=\"text\">\r\n\t\t\t\t\t\t\t\t{{row.message}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 领取红包消息 -->\r\n\t\t\t\t\t\t\t<!-- <view v-if=\"row.msg.type=='redEnvelope'\" class=\"red-envelope\">\r\n\t\t\t\t\t\t\t\t<image src=\"static/img/red-envelope-chat.png\"></image>\r\n\t\t\t\t\t\t\t\t{{row.msg.content.text}}\r\n\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t\t<!-- 用户消息 -->\r\n\t\t\t\t\t<block >\r\n\t\t\t\t\t\t<!-- 自己发出的消息 -->\r\n\t\t\t\t\t\t<view class=\"my\" v-if=\"row.senderId==wxUser.id\">\r\n\t\t\t\t\t\t\t<!-- 左-消息 -->\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type=='0'\" class=\"bubble\">\r\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.message\" ></rich-text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 语言消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type=='2'\" class=\"bubble voice\" @tap=\"playVoice(row)\" :class=\"playMsgid == row.id?'play':''\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.msg.content.length}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"icon my-voice\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type=='1'\" class=\"bubble img\" @tap=\"showPic(row)\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"row.message\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 右-头像 -->\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<image :src=\"row.userAvatar\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<!-- 别人发出的消息 -->\r\n\t\t\t\t\t\t<view class=\"other\" v-if=\"row.senderId!= wxUser.id\">\r\n\t\t\t\t\t\t\t<!-- 左-头像 -->\r\n\t\t\t\t\t\t\t<view class=\"left\">\r\n\t\t\t\t\t\t\t\t<image :src=\"row.userAvatar\"></image>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- 右-用户名称-时间-消息 -->\r\n\t\t\t\t\t\t\t<view class=\"right\">\r\n\t\t\t\t\t\t\t\t<view class=\"username\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"name\">{{row.username}}</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"time\">{{row.createTime}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 文字消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type == '0' \" class=\"bubble\">\r\n\t\t\t\t\t\t\t\t\t<rich-text :nodes=\"row.message\"></rich-text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 语音消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type == '2' \" class=\"bubble voice\" @tap=\"playVoice(row)\" :class=\"playMsgid == row.id?'play':''\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"icon other-voice\"></view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"length\">{{row.length}}</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 图片消息 -->\r\n\t\t\t\t\t\t\t\t<view v-if=\"row.type == '1' \" class=\"bubble img\" @tap=\"showPic(row)\">\r\n\t\t\t\t\t\t\t\t\t<image :src=\"row.message\" mode=\"aspectFit\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</block>\r\n\t\t\t\t</view>\r\n\t\t\t</scroll-view>\r\n\t\t</view>\r\n\t\t<!-- 抽屉栏 -->\r\n\t\t<view class=\"popup-layer\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t<!-- 表情 -->\r\n\t\t\t<!-- <swiper class=\"emoji-swiper\" :class=\"{hidden:hideEmoji}\" indicator-dots=\"true\" duration=\"150\">\r\n\t\t\t\t<swiper-item v-for=\"(page,pid) in emojiList\" :key=\"pid\">\r\n\t\t\t\t\t<view v-for=\"(em,eid) in page\" :key=\"eid\" @tap=\"addEmoji(em)\">\r\n\t\t\t\t\t\t<image mode=\"widthFix\" :src=\"'https://img.0728jh.com/Emoji/'+em.url\"></image>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swiper-item>\r\n\t\t\t</swiper> -->\r\n\t\t\t<!-- 更多功能 相册-拍照-红包 -->\r\n\t\t\t<view class=\"more-layer\" :class=\"{hidden:hideMore}\">\r\n\t\t\t\t<view class=\"list\">\r\n\t\t\t\t\t<view class=\"box\" @tap=\"chooseImage\">\r\n\t\t\t\t\t\t<view class=\"icon tupian2\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"box\" @tap=\"camera\">\r\n\t\t\t\t\t\t<view class=\"icon paizhao\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<!-- <view class=\"box\" @tap=\"handRedEnvelopes\"><view class=\"icon hongbao\"></view></view> -->\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 底部输入栏 -->\r\n\t\t<view class=\"input-box\" :class=\"popupLayerClass\" @touchmove.stop.prevent=\"discard\">\r\n\t\t\t<!-- H5下不能录音，输入栏布局改动一下 -->\r\n\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t<view class=\"voice\">\r\n\t\t\t\t<view class=\"icon\" :class=\"isVoice?'jianpan':'yuyin'\" @tap=\"switchVoice\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<!-- #ifdef H5 -->\r\n\t\t\t<view class=\"more\" @tap=\"showMore\">\r\n\t\t\t\t<view class=\"icon add\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view class=\"textbox\">\r\n\t\t\t\t<view class=\"voice-mode\" :class=\"[isVoice?'':'hidden',recording?'recording':'']\" @touchstart=\"voiceBegin\"\r\n\t\t\t\t @touchmove.stop.prevent=\"voiceIng\" @touchend=\"voiceEnd\" @touchcancel=\"voiceCancel\">{{voiceTis}}</view>\r\n\t\t\t\t<view class=\"text-mode\" :class=\"isVoice?'hidden':''\">\r\n\t\t\t\t\t<view class=\"box\">\r\n\t\t\t\t\t\t<textarea :auto-height=\"true\" :show-confirm-bar=\"false\"  v-model=\"textMsg\" @focus=\"textareaFocus\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"em\" @tap=\"chooseEmoji\">\r\n\t\t\t\t\t\t<view class=\"icon biaoqing\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #ifndef H5 -->\r\n\t\t\t<view class=\"more\" @tap=\"showMore\">\r\n\t\t\t\t<view class=\"icon add\"></view>\r\n\t\t\t</view>\r\n\t\t\t<!-- #endif -->\r\n\t\t\t<view class=\"send\" :class=\"isVoice?'hidden':''\" @tap=\"sendText\">\r\n\t\t\t\t<view class=\"btn\">发送</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 录音UI效果 -->\r\n\t\t<view class=\"record\" :class=\"recording?'':'hidden'\">\r\n\t\t\t<view class=\"ing\" :class=\"willStop?'hidden':''\"><view class=\"icon luyin2\" ></view></view>\r\n\t\t\t<view class=\"cancel\" :class=\"willStop?'':'hidden'\"><view class=\"icon chehui\" ></view></view>\r\n\t\t\t<view class=\"tis\" :class=\"willStop?'change':''\">{{recordTis}}</view>\r\n\t\t</view>\r\n\t\r\n\t\t</view>\r\n\t  </view>\t\r\n\t</view>\r\n</template>\r\n<script>\r\n\timport api from '../../pages/api/home.js'\r\n\timport ws from '../../utils/websocket/ws.js'\r\n\t\r\n\texport default {\r\n\t\t\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tdistribution:getApp().globalData.distribution,\r\n\t\t\t\twxUser:getApp().globalData.wxUser,\r\n\t\t\t\tcurrentPage:1,\r\n\t\t\t\tisOnce:true,\r\n\t\t\t\t//文字消息\r\n\t\t\t\ttextMsg:'',\r\n\t\t\t\t//消息列表\r\n\t\t\t\tisHistoryLoading:false,\r\n\t\t\t\tscrollAnimation:false,\r\n\t\t\t\tscrollTop:0,\r\n\t\t\t\tscrollToView:'',\r\n\t\t\t\tmsgList:[],\r\n\t\t\t\tmsgImgList:[],\r\n\t\t\t\tmyuid:0,\r\n\t\t\t\t\r\n\t\t\t\t//录音相关参数\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\t//H5不能录音\r\n\t\t\t\tRECORDER:uni.getRecorderManager(),\r\n\t\t\t\t// #endif\r\n\t\t\t\tisVoice:false,\r\n\t\t\t\tvoiceTis:'按住 说话',\r\n\t\t\t\trecordTis:\"手指上滑 取消发送\",\r\n\t\t\t\trecording:false,\r\n\t\t\t\twillStop:false,\r\n\t\t\t\tinitPoint:{identifier:0,Y:0},\r\n\t\t\t\trecordTimer:null,\r\n\t\t\t\trecordLength:0,\r\n\t\t\t\t\r\n\t\t\t\t//播放语音相关参数\r\n\t\t\t\tAUDIO:uni.createInnerAudioContext(),\r\n\t\t\t\tplayMsgid:null,\r\n\t\t\t\tVoiceTimer:null,\r\n\t\t\t\t// 抽屉参数\r\n\t\t\t\tpopupLayerClass:'',\r\n\t\t\t\t// more参数\r\n\t\t\t\thideMore:true,\r\n\t\t\t\t//表情定义\r\n\t\t\t\thideEmoji:true,\r\n\t\t\t\temojiList:[\r\n\t\t\t\t\t[{\"url\":\"100.gif\",alt:\"[微笑]\"},{\"url\":\"101.gif\",alt:\"[伤心]\"},{\"url\":\"102.gif\",alt:\"[美女]\"},{\"url\":\"103.gif\",alt:\"[发呆]\"},{\"url\":\"104.gif\",alt:\"[墨镜]\"},{\"url\":\"105.gif\",alt:\"[哭]\"},{\"url\":\"106.gif\",alt:\"[羞]\"},{\"url\":\"107.gif\",alt:\"[哑]\"},{\"url\":\"108.gif\",alt:\"[睡]\"},{\"url\":\"109.gif\",alt:\"[哭]\"},{\"url\":\"110.gif\",alt:\"[囧]\"},{\"url\":\"111.gif\",alt:\"[怒]\"},{\"url\":\"112.gif\",alt:\"[调皮]\"},{\"url\":\"113.gif\",alt:\"[笑]\"},{\"url\":\"114.gif\",alt:\"[惊讶]\"},{\"url\":\"115.gif\",alt:\"[难过]\"},{\"url\":\"116.gif\",alt:\"[酷]\"},{\"url\":\"117.gif\",alt:\"[汗]\"},{\"url\":\"118.gif\",alt:\"[抓狂]\"},{\"url\":\"119.gif\",alt:\"[吐]\"},{\"url\":\"120.gif\",alt:\"[笑]\"},{\"url\":\"121.gif\",alt:\"[快乐]\"},{\"url\":\"122.gif\",alt:\"[奇]\"},{\"url\":\"123.gif\",alt:\"[傲]\"}],\r\n\t\t\t\t\t[{\"url\":\"124.gif\",alt:\"[饿]\"},{\"url\":\"125.gif\",alt:\"[累]\"},{\"url\":\"126.gif\",alt:\"[吓]\"},{\"url\":\"127.gif\",alt:\"[汗]\"},{\"url\":\"128.gif\",alt:\"[高兴]\"},{\"url\":\"129.gif\",alt:\"[闲]\"},{\"url\":\"130.gif\",alt:\"[努力]\"},{\"url\":\"131.gif\",alt:\"[骂]\"},{\"url\":\"132.gif\",alt:\"[疑问]\"},{\"url\":\"133.gif\",alt:\"[秘密]\"},{\"url\":\"134.gif\",alt:\"[乱]\"},{\"url\":\"135.gif\",alt:\"[疯]\"},{\"url\":\"136.gif\",alt:\"[哀]\"},{\"url\":\"137.gif\",alt:\"[鬼]\"},{\"url\":\"138.gif\",alt:\"[打击]\"},{\"url\":\"139.gif\",alt:\"[bye]\"},{\"url\":\"140.gif\",alt:\"[汗]\"},{\"url\":\"141.gif\",alt:\"[抠]\"},{\"url\":\"142.gif\",alt:\"[鼓掌]\"},{\"url\":\"143.gif\",alt:\"[糟糕]\"},{\"url\":\"144.gif\",alt:\"[恶搞]\"},{\"url\":\"145.gif\",alt:\"[什么]\"},{\"url\":\"146.gif\",alt:\"[什么]\"},{\"url\":\"147.gif\",alt:\"[累]\"}],\r\n\t\t\t\t\t[{\"url\":\"148.gif\",alt:\"[看]\"},{\"url\":\"149.gif\",alt:\"[难过]\"},{\"url\":\"150.gif\",alt:\"[难过]\"},{\"url\":\"151.gif\",alt:\"[坏]\"},{\"url\":\"152.gif\",alt:\"[亲]\"},{\"url\":\"153.gif\",alt:\"[吓]\"},{\"url\":\"154.gif\",alt:\"[可怜]\"},{\"url\":\"155.gif\",alt:\"[刀]\"},{\"url\":\"156.gif\",alt:\"[水果]\"},{\"url\":\"157.gif\",alt:\"[酒]\"},{\"url\":\"158.gif\",alt:\"[篮球]\"},{\"url\":\"159.gif\",alt:\"[乒乓]\"},{\"url\":\"160.gif\",alt:\"[咖啡]\"},{\"url\":\"161.gif\",alt:\"[美食]\"},{\"url\":\"162.gif\",alt:\"[动物]\"},{\"url\":\"163.gif\",alt:\"[鲜花]\"},{\"url\":\"164.gif\",alt:\"[枯]\"},{\"url\":\"165.gif\",alt:\"[唇]\"},{\"url\":\"166.gif\",alt:\"[爱]\"},{\"url\":\"167.gif\",alt:\"[分手]\"},{\"url\":\"168.gif\",alt:\"[生日]\"},{\"url\":\"169.gif\",alt:\"[电]\"},{\"url\":\"170.gif\",alt:\"[炸弹]\"},{\"url\":\"171.gif\",alt:\"[刀子]\"}],\r\n\t\t\t\t\t[{\"url\":\"172.gif\",alt:\"[足球]\"},{\"url\":\"173.gif\",alt:\"[瓢虫]\"},{\"url\":\"174.gif\",alt:\"[翔]\"},{\"url\":\"175.gif\",alt:\"[月亮]\"},{\"url\":\"176.gif\",alt:\"[太阳]\"},{\"url\":\"177.gif\",alt:\"[礼物]\"},{\"url\":\"178.gif\",alt:\"[抱抱]\"},{\"url\":\"179.gif\",alt:\"[拇指]\"},{\"url\":\"180.gif\",alt:\"[贬低]\"},{\"url\":\"181.gif\",alt:\"[握手]\"},{\"url\":\"182.gif\",alt:\"[剪刀手]\"},{\"url\":\"183.gif\",alt:\"[抱拳]\"},{\"url\":\"184.gif\",alt:\"[勾引]\"},{\"url\":\"185.gif\",alt:\"[拳头]\"},{\"url\":\"186.gif\",alt:\"[小拇指]\"},{\"url\":\"187.gif\",alt:\"[拇指八]\"},{\"url\":\"188.gif\",alt:\"[食指]\"},{\"url\":\"189.gif\",alt:\"[ok]\"},{\"url\":\"190.gif\",alt:\"[情侣]\"},{\"url\":\"191.gif\",alt:\"[爱心]\"},{\"url\":\"192.gif\",alt:\"[蹦哒]\"},{\"url\":\"193.gif\",alt:\"[颤抖]\"},{\"url\":\"194.gif\",alt:\"[怄气]\"},{\"url\":\"195.gif\",alt:\"[跳舞]\"}],\r\n\t\t\t\t\t[{\"url\":\"196.gif\",alt:\"[发呆]\"},{\"url\":\"197.gif\",alt:\"[背着]\"},{\"url\":\"198.gif\",alt:\"[伸手]\"},{\"url\":\"199.gif\",alt:\"[耍帅]\"},{\"url\":\"200.png\",alt:\"[微笑]\"},{\"url\":\"201.png\",alt:\"[生病]\"},{\"url\":\"202.png\",alt:\"[哭泣]\"},{\"url\":\"203.png\",alt:\"[吐舌]\"},{\"url\":\"204.png\",alt:\"[迷糊]\"},{\"url\":\"205.png\",alt:\"[瞪眼]\"},{\"url\":\"206.png\",alt:\"[恐怖]\"},{\"url\":\"207.png\",alt:\"[忧愁]\"},{\"url\":\"208.png\",alt:\"[眨眉]\"},{\"url\":\"209.png\",alt:\"[闭眼]\"},{\"url\":\"210.png\",alt:\"[鄙视]\"},{\"url\":\"211.png\",alt:\"[阴暗]\"},{\"url\":\"212.png\",alt:\"[小鬼]\"},{\"url\":\"213.png\",alt:\"[礼物]\"},{\"url\":\"214.png\",alt:\"[拜佛]\"},{\"url\":\"215.png\",alt:\"[力量]\"},{\"url\":\"216.png\",alt:\"[金钱]\"},{\"url\":\"217.png\",alt:\"[蛋糕]\"},{\"url\":\"218.png\",alt:\"[彩带]\"},{\"url\":\"219.png\",alt:\"[礼物]\"},]\t\t\t\t\r\n\t\t\t\t],\r\n\t\t\t\t//表情图片图床名称 ，由于我上传的第三方图床名称会有改变，所以有此数据来做对应，您实际应用中应该不需要\r\n\t\t\t\tonlineEmoji:{\"100.gif\":\"AbNQgA.gif\",\"101.gif\":\"AbN3ut.gif\",\"102.gif\":\"AbNM3d.gif\",\"103.gif\":\"AbN8DP.gif\",\"104.gif\":\"AbNljI.gif\",\"105.gif\":\"AbNtUS.gif\",\"106.gif\":\"AbNGHf.gif\",\"107.gif\":\"AbNYE8.gif\",\"108.gif\":\"AbNaCQ.gif\",\"109.gif\":\"AbNN4g.gif\",\"110.gif\":\"AbN0vn.gif\",\"111.gif\":\"AbNd3j.gif\",\"112.gif\":\"AbNsbV.gif\",\"113.gif\":\"AbNwgs.gif\",\"114.gif\":\"AbNrD0.gif\",\"115.gif\":\"AbNDuq.gif\",\"116.gif\":\"AbNg5F.gif\",\"117.gif\":\"AbN6ET.gif\",\"118.gif\":\"AbNcUU.gif\",\"119.gif\":\"AbNRC4.gif\",\"120.gif\":\"AbNhvR.gif\",\"121.gif\":\"AbNf29.gif\",\"122.gif\":\"AbNW8J.gif\",\"123.gif\":\"AbNob6.gif\",\"124.gif\":\"AbN5K1.gif\",\"125.gif\":\"AbNHUO.gif\",\"126.gif\":\"AbNIDx.gif\",\"127.gif\":\"AbN7VK.gif\",\"128.gif\":\"AbNb5D.gif\",\"129.gif\":\"AbNX2d.gif\",\"130.gif\":\"AbNLPe.gif\",\"131.gif\":\"AbNjxA.gif\",\"132.gif\":\"AbNO8H.gif\",\"133.gif\":\"AbNxKI.gif\",\"134.gif\":\"AbNzrt.gif\",\"135.gif\":\"AbU9Vf.gif\",\"136.gif\":\"AbUSqP.gif\",\"137.gif\":\"AbUCa8.gif\",\"138.gif\":\"AbUkGQ.gif\",\"139.gif\":\"AbUFPg.gif\",\"140.gif\":\"AbUPIS.gif\",\"141.gif\":\"AbUZMn.gif\",\"142.gif\":\"AbUExs.gif\",\"143.gif\":\"AbUA2j.gif\",\"144.gif\":\"AbUMIU.gif\",\"145.gif\":\"AbUerq.gif\",\"146.gif\":\"AbUKaT.gif\",\"147.gif\":\"AbUmq0.gif\",\"148.gif\":\"AbUuZV.gif\",\"149.gif\":\"AbUliF.gif\",\"150.gif\":\"AbU1G4.gif\",\"151.gif\":\"AbU8z9.gif\",\"152.gif\":\"AbU3RJ.gif\",\"153.gif\":\"AbUYs1.gif\",\"154.gif\":\"AbUJMR.gif\",\"155.gif\":\"AbUadK.gif\",\"156.gif\":\"AbUtqx.gif\",\"157.gif\":\"AbUUZ6.gif\",\"158.gif\":\"AbUBJe.gif\",\"159.gif\":\"AbUdIO.gif\",\"160.gif\":\"AbU0iD.gif\",\"161.gif\":\"AbUrzd.gif\",\"162.gif\":\"AbUDRH.gif\",\"163.gif\":\"AbUyQA.gif\",\"164.gif\":\"AbUWo8.gif\",\"165.gif\":\"AbU6sI.gif\",\"166.gif\":\"AbU2eP.gif\",\"167.gif\":\"AbUcLt.gif\",\"168.gif\":\"AbU4Jg.gif\",\"169.gif\":\"AbURdf.gif\",\"170.gif\":\"AbUhFS.gif\",\"171.gif\":\"AbU5WQ.gif\",\"172.gif\":\"AbULwV.gif\",\"173.gif\":\"AbUIzj.gif\",\"174.gif\":\"AbUTQs.gif\",\"175.gif\":\"AbU7yn.gif\",\"176.gif\":\"AbUqe0.gif\",\"177.gif\":\"AbUHLq.gif\",\"178.gif\":\"AbUOoT.gif\",\"179.gif\":\"AbUvYF.gif\",\"180.gif\":\"AbUjFU.gif\",\"181.gif\":\"AbaSSJ.gif\",\"182.gif\":\"AbUxW4.gif\",\"183.gif\":\"AbaCO1.gif\",\"184.gif\":\"Abapl9.gif\",\"185.gif\":\"Aba9yR.gif\",\"186.gif\":\"AbaFw6.gif\",\"187.gif\":\"Abaiex.gif\",\"188.gif\":\"AbakTK.gif\",\"189.gif\":\"AbaZfe.png\",\"190.gif\":\"AbaEFO.gif\",\"191.gif\":\"AbaVYD.gif\",\"192.gif\":\"AbamSH.gif\",\"193.gif\":\"AbaKOI.gif\",\"194.gif\":\"Abanld.gif\",\"195.gif\":\"Abau6A.gif\",\"196.gif\":\"AbaQmt.gif\",\"197.gif\":\"Abal0P.gif\",\"198.gif\":\"AbatpQ.gif\",\"199.gif\":\"Aba1Tf.gif\",\"200.png\":\"Aba8k8.png\",\"201.png\":\"AbaGtS.png\",\"202.png\":\"AbaJfg.png\",\"203.png\":\"AbaNlj.png\",\"204.png\":\"Abawmq.png\",\"205.png\":\"AbaU6s.png\",\"206.png\":\"AbaaXn.png\",\"207.png\":\"Aba000.png\",\"208.png\":\"AbarkT.png\",\"209.png\":\"AbastU.png\",\"210.png\":\"AbaB7V.png\",\"211.png\":\"Abafn1.png\",\"212.png\":\"Abacp4.png\",\"213.png\":\"AbayhF.png\",\"214.png\":\"Abag1J.png\",\"215.png\":\"Aba2c9.png\",\"216.png\":\"AbaRXR.png\",\"217.png\":\"Aba476.png\",\"218.png\":\"Abah0x.png\",\"219.png\":\"Abdg58.png\"},\r\n\t\t\t\t//红包相关参数\r\n\t\t\t\twindowsState:'',\r\n\t\t\t\tredenvelopeData:{\r\n\t\t\t\t\trid:null,\t//红包ID\r\n\t\t\t\t\tfrom:null,\r\n\t\t\t\t\tface:null,\r\n\t\t\t\t\tblessing:null,\r\n\t\t\t\t\tmoney:null\r\n\t\t\t\t}\r\n\t\t\t};\r\n\t\t},\r\n\t\t\r\n\t\tonUnload(){\r\n\t\t\tconsole.log(\"销毁\")\r\n\t\t\tthis.unsubscribe();\r\n\t\t\tthis.disconnect();\r\n\t\t},\r\n\t\tonLoad(option) {\r\n\t\t\tlet that =this;\r\n\t\t\t\r\n\t\t\tthat.userInfoGet();\r\n\t\t\t\r\n\t\t},\r\n\t\tonShow(){\r\n\t\t\tthis.scrollTop = 9999999;\r\n\t\t\t\r\n\t\t\t//模板借由本地缓存实现发红包效果，实际应用中请不要使用此方法。\r\n\t\t\t//\r\n\t\t\t// uni.getStorage({\r\n\t\t\t// \tkey: 'redEnvelopeData',\r\n\t\t\t// \tsuccess:  (res)=>{\r\n\t\t\t// \t\tconsole.log(res.data);\r\n\t\t\t// \t\tlet nowDate = new Date();\r\n\t\t\t// \t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\r\n\t\t\t// \t\tlastid++;\r\n\t\t\t// \t\tlet row = {type:\"user\",msg:{id:lastid,type:\"redEnvelope\",time:nowDate.getHours()+\":\"+nowDate.getMinutes(),userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:{blessing:res.data.blessing,rid:Math.floor(Math.random()*1000+1),isReceived:false}}};\r\n\t\t\t// \t\tthis.screenMsg(row);\r\n\t\t\t// \t\tuni.removeStorage({key: 'redEnvelopeData'});\r\n\t\t\t// \t}\r\n\t\t\t// });\r\n\t\t\t\r\n\t\t},\r\n\t\t\r\n\t\tmethods:{\r\n\t\t\tgetuser(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\treturn new Promise((l,r)=>{\r\n\t\t\t\t\t that.http(api.userInfoGet,'GET',{},false).then(res=>{\r\n\t\t\t\t\t\t console.log(\"第一步，查看用户信息\")\r\n\t\t\t\t\t\t that.wxUser=res.data;\r\n\t\t\t\t\t\t getApp().globalData.wxUser=res.data;\r\n\t\t\t\t\t\t l(res.data);\r\n\t\t\t\t\t });\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tchoosedistruible(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet id =getApp().globalData.projectItem.id\r\n\t\t\t\treturn new Promise((l,r)=>{\r\n\t\t\t\t\tthat.http(api.GetShareInfno+'/distributions','GET',{affId:id},false).then(res=>{\r\n\t\t\t\t\t\tconsole.log(\"第3步，随机置业\")\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tl(res);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tasync userInfoGet(){\r\n\t\t\t let that=this;\r\n\t\t\t // that.http(api.userInfoGet,'GET',{},false)\r\n\t\t\t //    .then(res => {\r\n\t\t\t\t// \t\t\tconsole.log(\"userInfoGet\")\r\n\t\t\t\t// \t\t\tconsole.log(res)\r\n\t\t\t //       // userInfo: res.data\r\n\t\t\tconsole.log(\"进入聊天界面\")\r\n\t\t\tlet user= await that.getuser();\r\n\t\t\tlet distribut=await that.getdistribution();\r\n\t\t\tconsole.log(distribut)\r\n\t\t\tif(distribut == null){\r\n\t\t\t\t//随机置业\r\n\t\t\t\t//随机后再执行\r\n\t\t\t\tconsole.log(\"置业为null\")\r\n\t\t\t\tlet choseDistruible =  await that.choosedistruible();\r\n\t\t\t\t user= await that.getuser();\r\n\t\t\t\t distribut=await that.getdistribution();\r\n\t\t\t} \r\n\t\t\t\tconsole.log(\"置业不为null\")\r\n\t\t\t\tconsole.log(getApp().globalData.distribution)\r\n\t\t\t\tthat.wxUser=user\r\n\t\t\t\tgetApp().globalData.wxUser=user\r\n\t\t\t\t// that.getUserinfozhiye();\t\r\n\t\t\t\t// that.$emit('cachwxUser',res.data)\r\n\t\t\t\t\t\t//刷新置业顾问\r\n\t\t\t\t\t\tif(user.phone){\r\n\t\t\t\t\t\t\tgetApp().globalData.websene=false;\r\n\t\t\t\t\t\t\tthat.getMsgList();\r\n\t\t\t\t\t\t\t//语音自然播放结束\r\n\t\t\t\t\t\t\tthat.AUDIO.onEnded((res)=>{\r\n\t\t\t\t\t\t\t\tthat.playMsgid=null;\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// #ifndef H5\r\n\t\t\t\t\t\t\t//录音开始事件\r\n\t\t\t\t\t\t\tthat.RECORDER.onStart((e)=>{\r\n\t\t\t\t\t\t\t\tthat.recordBegin(e);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t//录音结束事件\r\n\t\t\t\t\t\t\tthat.RECORDER.onStop((e)=>{\r\n\t\t\t\t\t\t\t\tthat.recordEnd(e);\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t// #endif\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t//this.PostPages(1);\r\n\t\t\t\t\t\t\t// 订阅之前 要保证存在 getApp().globalData.distribution 的存在\r\n\t\t\t\t\t\t\t// if()\r\n\t\t\t\t\t\t\tthat.connect()\r\n\t\t\t\t\t\t\tthat.subscribe()\r\n\t\t\t\t\t\t}\r\n\t\t\r\n\t\t\t  \r\n\t\t\t    // })\r\n\t\t\t},\r\n\t\t\t// 接受消息(筛选处理)\r\n\t\t\tscreenMsg(msgs){\r\n\t\t\t\t//从长连接处转发给这个方法，进行筛选处理\r\n\t\t\t\tlet msg= JSON.parse(JSON.stringify(msgs))\r\n\t\t\t\tconsole.log(\"===========================\")\r\n\t\t\t\tconsole.log(msg)\r\n\t\t\t\t\r\n\t\t\t\tif(msg.type=='3'){\r\n\t\t\t\t\t// 系统消息\r\n\t\t\t\t\tswitch (msg.type){\r\n\t\t\t\t\t\tcase '3':\r\n\t\t\t\t\t\t\tthis.addSystemTextMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'redEnvelope':\r\n\t\t\t\t\t\t\tthis.addSystemRedEnvelopeMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t}else if(msg.type=='0'||msg.type=='1'||msg.type=='2'){\r\n\t\t\t\t\t// 用户消息\r\n\t\t\t\t\tswitch (msg.type){\r\n\t\t\t\t\t\tcase '0':\r\n\t\t\t\t\t\t\tthis.addTextMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase '2':\r\n\t\t\t\t\t\t\tthis.addVoiceMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase '1':\r\n\t\t\t\t\t\t\tthis.addImgMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\tcase 'redEnvelope':\r\n\t\t\t\t\t\t\tthis.addRedEnvelopeMsg(msg);\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t}\r\n\t\t\t\t\tconsole.log('用户消息');\r\n\t\t\t\t\t//非自己的消息震动\r\n\t\t\t\t\tif(msg.senderId!= this.wxUser.id){\r\n\t\t\t\t\t\tconsole.log('振动');\r\n\t\t\t\t\t\tuni.vibrateLong();\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t// 滚动到底\r\n\t\t\t\t\tthis.scrollToView = 'msg'+ msg.id\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//触发滑动到顶部(加载历史信息记录)\r\n\t\t\tloadHistory(e){\r\n\t\t\t\tif(this.isHistoryLoading){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\tthis.isHistoryLoading = true;//参数作为进入请求标识，防止重复请求\r\n\t\t\t\tthis.scrollAnimation = false;//关闭滑动动画\r\n\t\t\t\tlet Viewid = this.msgList[0].id;//记住第一个信息ID\r\n\t\t\t\t//本地模拟请求历史记录效果\r\n\t\t\t\t//this.currentPage=this.currentPage-1\r\n\t\t\t\t\r\n\t\t\t\tthis.PostPage(this.currentPage)\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.scrollToView = 'msg'+Viewid;//跳转上次的第一行信息位置\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tthis.scrollAnimation = true;//恢复滚动动画\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t\tthis.isHistoryLoading = false;\r\n\t\t\t\t// setTimeout(()=>{\r\n\t\t\t\t// \t// 消息列表\r\n\t\t\t\t// \tlet list = [\r\n\t\t\t\t// \t\t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{text:\"为什么温度会相差那么大？\"}}},\r\n\t\t\t\t// \t\t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{text:\"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。\"}}},\r\n\t\t\t\t// \t\t{type:\"user\",msg:{id:3,type:\"voice\",time:\"12:59\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{url:\"/static/voice/1.mp3\",length:\"00:06\"}}},\r\n\t\t\t\t// \t\t{type:\"user\",msg:{id:4,type:\"voice\",time:\"13:05\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{url:\"/static/voice/2.mp3\",length:\"00:06\"}}},\r\n\t\t\t\t// \t]\r\n\t\t\t\t// \t// 获取消息中的图片,并处理显示尺寸\r\n\t\t\t\t// \tfor(let i=0;i<list.length;i++){\r\n\t\t\t\t// \t\tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\r\n\t\t\t\t// \t\t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\r\n\t\t\t\t// \t\t\tthis.msgImgList.unshift(list[i].msg.content.url);\r\n\t\t\t\t// \t\t}\r\n\t\t\t\t// \t\tlist[i].msg.id = Math.floor(Math.random()*1000+1);\r\n\t\t\t\t// \t\tthis.msgList.unshift(list[i]);\r\n\t\t\t\t// \t}\r\n\t\t\t\t\t\r\n\t\t\t\t// \t//这段代码很重要，不然每次加载历史数据都会跳到顶部\r\n\t\t\t\t// \tthis.$nextTick(function() {\r\n\t\t\t\t// \t\tthis.scrollToView = 'msg'+Viewid;//跳转上次的第一行信息位置\r\n\t\t\t\t// \t\tthis.$nextTick(function() {\r\n\t\t\t\t// \t\t\tthis.scrollAnimation = true;//恢复滚动动画\r\n\t\t\t\t// \t\t});\r\n\t\t\t\t\t\t\r\n\t\t\t\t// \t});\r\n\t\t\t\t// \tthis.isHistoryLoading = false;\r\n\t\t\t\t\t\r\n\t\t\t\t// },1000)\r\n\t\t\t},\r\n\t\t\t// 加载初始页面消息\r\n\t\t\tgetdistribution(){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet id = getApp().globalData.projectItem.id\r\n\t\t\t\t let distributionList=getApp().globalData.wxUser.distribution\r\n\t\t\t\t console.log(\"wxUser\")\r\n\t\t\t\t console.log(getApp().globalData.wxUser)\r\n\t\t\t\treturn new Promise((l,r)=>{\r\n\t\t\t\t\tthat.http(api.getall,'GET',{affId:id},false).then(res=>{\r\n\t\t\t\t\t\tconsole.log(\"查看置业列表\")\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tlet ress=res.data\r\n\t\t\t\t\t\tlet distributionItem=null;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tfor(let i=0;i<ress.length;i++){\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t for(let j=0 ;j<distributionList.length;j++){\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t if(ress[i].id == distributionList[j]){\r\n\t\t\t\t\t\t\t\t\t\t distributionItem=ress[i];\r\n\t\t\t\t\t\t\t\t\t\t getApp().globalData.distribution = ress[i]\r\n\t\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t\t }\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log(\"第二步，获取置业\")\r\n\t\t\t\t\t\t\tconsole.log( getApp().globalData.distribution)\r\n\t\t\t\t\t\t\tl(distributionItem);\r\n\t\t\t\t\t})\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\tasync getMsgList(){\r\n\t\t\tlet that=this;\r\n\t\t\t\t\r\n\t\t\t\t// await that.getdistribution();\r\n\t\t\t\t\r\n\t\t\t\t \r\n\t\t\t\t this.PostPages(1);\r\n\t\t\t\t// 消息列表\r\n\t\t\t\t// let list = [\r\n\t\t\t\t// \t{type:\"system\",msg:{id:0,type:\"text\",content:{text:\"欢迎进入HM-chat聊天室\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:1,type:\"text\",time:\"12:56\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{text:\"为什么温度会相差那么大？\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:2,type:\"text\",time:\"12:57\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{text:\"这个是有偏差的，两个温度相差十几二十度是很正常的，如果相差五十度，那即是质量问题了。\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:3,type:\"voice\",time:\"12:59\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{url:\"static/voice/1.mp3\",length:\"00:06\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:4,type:\"voice\",time:\"13:05\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{url:\"static/voice/2.mp3\",length:\"00:06\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:5,type:\"img\",time:\"13:05\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{url:\"static/img/p10.jpg\",w:200,h:200}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:6,type:\"img\",time:\"12:59\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{url:\"static/img/q.jpg\",w:1920,h:1080}}},\r\n\t\t\t\t// \t{type:\"system\",msg:{id:7,type:\"text\",content:{text:\"欢迎进入HM-chat聊天室\"}}},\r\n\t\t\t\t\t\r\n\t\t\t\t// \t{type:\"system\",msg:{id:9,type:\"redEnvelope\",content:{text:\"售后客服008领取了你的红包\"}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:10,type:\"redEnvelope\",time:\"12:56\",userinfo:{uid:0,username:\"大黑哥\",face:\"static/img/face.jpg\"},content:{blessing:\"恭喜发财，大吉大利，万事如意\",rid:0,isReceived:false}}},\r\n\t\t\t\t// \t{type:\"user\",msg:{id:11,type:\"redEnvelope\",time:\"12:56\",userinfo:{uid:1,username:\"售后客服008\",face:\"static/img/im/face/face_2.jpg\"},content:{blessing:\"恭喜发财\",rid:1,isReceived:false}}},\r\n\t\t\t\t// ]\r\n\t\t\t\t// 获取消息中的图片,并处理显示尺寸\r\n\t\t\t\t// for(let i=0;i<list.length;i++){\r\n\t\t\t\t// \tif(list[i].type=='user'&&list[i].msg.type==\"img\"){\r\n\t\t\t\t// \t\tlist[i].msg.content = this.setPicSize(list[i].msg.content);\r\n\t\t\t\t// \t\tthis.msgImgList.push(list[i].msg.content.url);\r\n\t\t\t\t// \t}\r\n\t\t\t\t// }\r\n\t\t\t\t//this.msgList = list;\r\n\t\t\t\t// 滚动到底部\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t//进入页面滚动到底部\r\n\t\t\t\t\tthis.scrollTop = 9999;\r\n\t\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\t\tthis.scrollAnimation = true;\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//处理图片尺寸，如果不处理宽高，新进入页面加载图片时候会闪\r\n\t\t\tsetPicSize(content){\r\n\t\t\t\t// 让图片最长边等于设置的最大长度，短边等比例缩小，图片控件真实改变，区别于aspectFit方式。\r\n\t\t\t\tlet maxW = uni.upx2px(350);//350是定义消息图片最大宽度\r\n\t\t\t\tlet maxH = uni.upx2px(350);//350是定义消息图片最大高度\r\n\t\t\t\tif(content.w>maxW||content.h>maxH){\r\n\t\t\t\t\tlet scale = content.w/content.h;\r\n\t\t\t\t\tcontent.w = scale>1?maxW:maxH*scale;\r\n\t\t\t\t\tcontent.h = scale>1?maxW/scale:maxH;\r\n\t\t\t\t}\r\n\t\t\t\treturn content;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//更多功能(点击+弹出) \r\n\t\t\tshowMore(){ \r\n\t\t\t\tthis.isVoice = false;\r\n\t\t\t\tthis.hideEmoji = true;\r\n\t\t\t\tif(this.hideMore){\r\n\t\t\t\t\tthis.hideMore = false;\r\n\t\t\t\t\tthis.openDrawer();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 打开抽屉\r\n\t\t\topenDrawer(){\r\n\t\t\t\tthis.popupLayerClass = 'showLayer';\r\n\t\t\t},\r\n\t\t\t// 隐藏抽屉\r\n\t\t\thideDrawer(){\r\n\t\t\t\tthis.popupLayerClass = '';\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.hideMore = true;\r\n\t\t\t\t\tthis.hideEmoji = true;\r\n\t\t\t\t},150);\r\n\t\t\t},\r\n\t\t\t// 选择图片发送\r\n\t\t\tchooseImage(){\r\n\t\t\t\tthis.getImage('album');\r\n\t\t\t},\r\n\t\t\t//拍照发送\r\n\t\t\tcamera(){\r\n\t\t\t\tthis.getImage('camera');\r\n\t\t\t},\r\n\t\t\t//发红包\r\n\t\t\thandRedEnvelopes(){\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl:'HM-hand/HM-hand'\r\n\t\t\t\t});\r\n\t\t\t\tthis.hideDrawer();\r\n\t\t\t},\r\n\t\t\t//选照片 or 拍照\r\n\t\t\tgetImage(type){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tthis.hideDrawer();\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tsourceType:[type],\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: (res)=>{\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\tfor(let i=0;i<res.tempFilePaths.length;i++){\r\n\t\t\t\t\t\t\tuni.getImageInfo({\r\n\t\t\t\t\t\t\t\tsrc: res.tempFilePaths[i],\r\n\t\t\t\t\t\t\t\tsuccess: (image)=>{\r\n\t\t\t\t\t\t\t\t\tconsole.log(image.width);\r\n\t\t\t\t\t\t\t\t\tconsole.log(image.height);\r\n\t\t\t\t\t\t\t\t\tlet msg = res.tempFilePaths[i];\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t  that.upload(msg)\r\n\t\t\t\t\t\t\t\t  // that.sendMsg(msg,null,'1');\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t//图片上传\r\n\t\t\tupload(tempFilePath){\r\n\t\t\t\tconsole.log(tempFilePath)\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\turl: api.UpLoad,\r\n\t\t\t\t\tfiles: tempFilePath,\r\n\t\t\t\t\tfilePath: tempFilePath,\r\n\t\t\t\t\tname: 'file',\r\n\t\t\t\t\tfileType: 'image',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t\t'app-id': wx.getAccountInfoSync().miniProgram.appId,\r\n\t\t\t\t\t\t'third-session': getApp().globalData.thirdSession\r\n\t\t\t\t\t},\r\n\t\t\t\t\tformData: {\r\n\t\t\t\t\t\tdir: 'material',\r\n\t\t\t\t\t\tfileType: 'image',\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(\"上传图片结果\")\r\n\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t//this.tempImage.push(JSON.parse(res.data).link)\r\n\t\t\t\t\t\tconsole.log(JSON.parse(res.data).link);\r\n\t\t\t\t\t\t//conosle.log(this.tempImage)\r\n\t\t\t\t\t\tlet user = getApp().globalData.wxUser\r\n\t\t\t\t\t\tlet message = {\r\n\t\t\t\t\t\t\tmessage: JSON.parse(res.data).link,\r\n\t\t\t\t\t\t\ttype: '1',\r\n\t\t\t\t\t\t\tsenderId: user.id,\r\n\t\t\t\t\t\t\treceiverId: \"\", //接受者Id\r\n\t\t\t\t\t\t\tuserAvatar: user.headimgUrl,\r\n\t\t\t\t\t\t\tuserName: user.nickName,\r\n\t\t\t\t\t\t\tcreateTime: new Date(),\r\n\t\t\t\t\t\t\tstatus: '0',\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.sendMsg(\"\",message,'1')\r\n\t\t\t\t\t\t// that.PostSend(message);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// that.send(message)\r\n\t\t\t\t\t},\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// 选择表情\r\n\t\t\tchooseEmoji(){\r\n\t\t\t\tthis.hideMore = true;\r\n\t\t\t\tif(this.hideEmoji){\r\n\t\t\t\t\tthis.hideEmoji = false;\r\n\t\t\t\t\tthis.openDrawer();\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//添加表情\r\n\t\t\taddEmoji(em){\r\n\t\t\t\tthis.textMsg+=em.alt;\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tconsole.log(em)\r\n\t\t\t\tlet content = this.replaceEmoji(em.alt);\r\n\t\t\t\tconsole.log(content)\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t//获取焦点，如果不是选表情ing,则关闭抽屉\r\n\t\t\ttextareaFocus(){\r\n\t\t\t\tif(this.popupLayerClass=='showLayer' && this.hideMore == false){\r\n\t\t\t\t\tthis.hideDrawer();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 发送文字消息\r\n\t\t\tsendText(){\r\n\t\t\t\tthis.hideDrawer();//隐藏抽屉\r\n\t\t\t\tif(!this.textMsg){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet content = this.replaceEmoji(this.textMsg);\r\n\t\t\t\tlet msg = content\r\n\t\t\t\tconsole.log(msg)\r\n\t\t\t\tthis.sendMsg(msg,null,'0');\r\n\t\t\t\tthis.textMsg = '';//清空输入框\r\n\t\t\t},\r\n\t\t\t//替换表情符号为图片\r\n\t\t\treplaceEmoji(str){\r\n\t\t\t\tconsole.log(str)\r\n\t\t\t\tlet replacedStr = str.replace(/\\[([^(\\]|\\[)]*)\\]/g,(item, index)=>{\r\n\t\t\t\t\tconsole.log(\"item: \" + item);\r\n\t\t\t\t\tfor(let i=0;i<this.emojiList.length;i++){\r\n\t\t\t\t\t\tlet row = this.emojiList[i];\r\n\t\t\t\t\t\tfor(let j=0;j<row.length;j++){\r\n\t\t\t\t\t\t\tlet EM = row[j];\r\n\t\t\t\t\t\t\tif(EM.alt==item){\r\n\t\t\t\t\t\t\t\tconsole.log(EM.url)\r\n\t\t\t\t\t\t\t\t//在线表情路径，图文混排必须使用网络路径，请上传一份表情到你的服务器后再替换此路径 \r\n\t\t\t\t\t\t\t\t//比如你上传服务器后，你的100.gif路径为https://www.xxx.com/emoji/100.gif 则替换onlinePath填写为https://www.xxx.com/emoji/\r\n\t\t\t\t\t\t\t\tlet onlinePath = 'https://img.0728jh.com/Emoji/'\r\n\t\t\t\t\t\t\t\tlet imgstr = '<img src=\"'+onlinePath+EM.url+'\" />';\r\n\t\t\t\t\t\t\t\t// let imgstr = onlinePath+EM.url;\r\n\t\t\t\t\t\t\t\tconsole.log(\"imgstr: \" + imgstr);\r\n\t\t\t\t\t\t\t\treturn imgstr;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\treturn replacedStr;\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 发送消息\r\n\t\t\tasync sendMsg(content,message,types){\r\n\t\t\t\tconsole.log(\"查看发送消息\")\r\n\t\t\t\tconsole.log(content)\r\n\t\t\t\t//实际应用中，此处应该提交长连接，模板仅做本地处理。\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet obj;\r\n\t\t\t\tif(message==null){\r\n\t\t\t\t\tlet msg = content\r\n\t\t\t\t\t\tlet type = types\r\n\t\t\t\t\t\tvar nowDate = new Date();\r\n\t\t\t\t\t\tconsole.log(this.msgList)\r\n\t\t\t\t\t\tlet lastid = 1;\r\n\t\t\t\t\t\tconsole.log(nowDate.getTime()+'')\r\n\t\t\t\t\t\tconsole.log(lastid)\r\n\t\t\t\t\t//\tlet msg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:0,username:\"大黑哥\",face:\"/static/img/face.jpg\"},content:content}}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(type=='2'){\r\n\t\t\t\t\t\t\t obj = {\r\n\t\t\t\t\t\t\t\tid:nowDate.getTime()+'',\r\n\t\t\t\t\t\t\t\tmessage: msg.url,\r\n\t\t\t\t\t\t\t\tlength: msg.length,\r\n\t\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\t\tsenderId: that.wxUser.id,\r\n\t\t\t\t\t\t\t\treceiverId: \"\",\r\n\t\t\t\t\t\t\t\tuserAvatar:that.wxUser.headimgUrl,\r\n\t\t\t\t\t\t\t\tuserName:that.wxUser.nickName,\r\n\t\t\t\t\t\t\t\tcreateTime: nowDate.getHours()+\":\"+nowDate.getMinutes(),\r\n\t\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}else{\r\n\t\t\t\t\t\tobj = {\r\n\t\t\t\t\t\t\tid:nowDate.getTime()+'',\r\n\t\t\t\t\t\t\tmessage: msg,\r\n\t\t\t\t\t\t\tlength: msg.length,\r\n\t\t\t\t\t\t\ttype: type,\r\n\t\t\t\t\t\t\tsenderId: that.wxUser.id,\r\n\t\t\t\t\t\t\treceiverId: \"\",\r\n\t\t\t\t\t\t\tuserAvatar:that.wxUser.headimgUrl,\r\n\t\t\t\t\t\t\tuserName:that.wxUser.nickName,\r\n\t\t\t\t\t\t\tcreateTime: nowDate.getHours()+\":\"+nowDate.getMinutes(),\r\n\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t}\t\r\n\t\t\t\t\t\t}\r\n\t\t\t\t}else{\r\n\t\t\t\t\tobj = message;\r\n\t\t\t\t}\r\n\t\t\t\r\n\t\t\t\t// 发送消息\r\n\t\t\t\t\r\n\t\t\t\r\n\t\t\t\tlet str=await that.PostSend(obj)\r\n\t\t\t\tobj[\"recordId\"]=str\r\n\t\t\t\t\r\n\t\t\t\tthat.screenMsg(obj);\t\r\n\t\t\t\tthat.send(obj)\r\n\t\t\t\t// 定时器模拟对方回复,三秒\r\n\t\t\t\t// setTimeout(()=>{\r\n\t\t\t\t// \tlastid = this.msgList[this.msgList.length-1].id;\r\n\t\t\t\t// \tlastid++;\r\n\t\t\t\t// \tmsg = {type:'user',msg:{id:lastid,time:nowDate.getHours()+\":\"+nowDate.getMinutes(),type:type,userinfo:{uid:1,username:\"售后客服008\",face:\"/static/img/im/face/face_2.jpg\"},content:content}}\r\n\t\t\t\t// \t// 本地模拟发送消息\r\n\t\t\t\t// \tthis.screenMsg(obj);\r\n\t\t\t\t// },3000)\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t// 添加文字消息到列表\r\n\t\t\taddTextMsg(msg){\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t\tconsole.log(this.msgList)\r\n\t\t\t},\r\n\t\t\t// 添加语音消息到列表\r\n\t\t\taddVoiceMsg(msg){\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t\tconsole.log(this.msgList)\r\n\t\t\t},\r\n\t\t\t// 添加图片消息到列表\r\n\t\t\taddImgMsg(msg){\r\n\t\t\t\t//console.log(msgs)\r\n\t\t\t\t//let msg = JSON.parse(JSON.stringify(msgs))\r\n\t\t\t\t\r\n\t\t\t//\tmsg.message = this.setPicSize(msg);\r\n\t\t\t\t\r\n\t\t\t\tthis.msgImgList.push(msg.message);\r\n\t\t\t\t//console.log(\"+++++++++++++++++++++++++++++++++++\")\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t\t//console.log(\"------------------------------\")\r\n\t\t\t\tconsole.log(this.msgList)\r\n\t\t\t},\r\n\t\t\taddRedEnvelopeMsg(msg){\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 添加系统文字消息到列表\r\n\t\t\taddSystemTextMsg(msg){\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t// 添加系统红包消息到列表\r\n\t\t\taddSystemRedEnvelopeMsg(msg){\r\n\t\t\t\tthis.msgList.push(msg);\r\n\t\t\t},\r\n\t\t\t //写库\r\n\t\t\tPostSend(message) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\r\n\t\t\t\tlet msg = message\r\n\t\t\t\tlet project = getApp().globalData.projectItem\r\n\t\t\t\tlet user = getApp().globalData.wxUser\r\n\t\t\t\t\r\n\t\t\t    let time = new Date();\r\n\t\t\t\t\r\n\t\t\t\tlet salessId = getApp().globalData.distribution.id\r\n\t\t\t\tlet messagess={};\r\n\t\t\t\tif(message.type=='2'){\r\n\t\t\t\t\tconsole.log(\"写库语音\")\r\n\t\t\t\t\tconsole.log(message)\r\n\t\t\t\tmessagess = {\r\n\t\t\t\t\taffiliationId: project.id,\r\n\t\t\t\t\ttenantId: project.tenantId,\r\n\t\t\t\t\tsenderId: user.id,\r\n\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t\tsalesmanId: salessId,\r\n\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\tmessageblob: message.message,\r\n\t\t\t\t\ttype: message.type, //0 表示消息，1表示图片\r\n\t\t\t\t\tspeech:parseInt(message.speech.split(\":\")[1]) || 0\r\n\t\t\t\t}\t\r\n\t\t\t\t}else{\r\n\t\t\t\t\tmessagess = {\r\n\t\t\t\t\t\taffiliationId: project.id,\r\n\t\t\t\t\t\ttenantId: project.tenantId,\r\n\t\t\t\t\t\tsenderId: user.id,\r\n\t\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t\t\tsalesmanId: salessId,\r\n\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\tmessageblob: message.message,\r\n\t\t\t\t\t\ttype: message.type, //0 表示消息，1表示图片\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tconsole.log(\"写库参数\")\r\n\t\t\t\tconsole.log(messagess);\r\n\t\t\t\treturn new Promise((l,r)=>{\r\n\t\t\t\t\tthat.http(api.ChattingRecords + \"/send\", 'POST', messagess\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t, false).then(res => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tconsole.log(\"写库—————————————————————————返回———————————————\")\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif(res.ok){\r\n\t\t\t\t\t\t\tl(res.data.succeed);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// return res.data.succeed  \r\n\t\t\t\t})\r\n\t\t\t\r\n\t\t\t\t//that.send(messagess);\r\n\t\t\t\t//that.message_list.push(messagess)\r\n\t\t\t},\r\n\t\t\t// 打开红包\r\n\t\t\topenRedEnvelope(msg,index){\r\n\t\t\t\tlet rid = msg.content.rid;\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle:'加载中...'\r\n\t\t\t\t});\r\n\t\t\t\tconsole.log(\"index: \" + index);\r\n\t\t\t\t//模拟请求服务器效果\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\t//加载数据\r\n\t\t\t\t\tif(rid==0){\r\n\t\t\t\t\t\tthis.redenvelopeData={\r\n\t\t\t\t\t\t\trid:0,\t//红包ID\r\n\t\t\t\t\t\t\tfrom:\"大黑哥\",\r\n\t\t\t\t\t\t\tface:\"/static/img/im/face/face.jpg\",\r\n\t\t\t\t\t\t\tblessing:\"恭喜发财，大吉大利\",\r\n\t\t\t\t\t\t\tmoney:\"已领完\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}else{\r\n\t\t\t\t\t\tthis.redenvelopeData={\r\n\t\t\t\t\t\t\trid:1,\t//红包ID\r\n\t\t\t\t\t\t\tfrom:\"售后客服008\",\r\n\t\t\t\t\t\t\tface:\"/static/img/im/face/face_2.jpg\",\r\n\t\t\t\t\t\t\tblessing:\"恭喜发财\",\r\n\t\t\t\t\t\t\tmoney:\"0.01\"\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t}\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tthis.windowsState = 'show';\r\n\t\t\t\t\t\r\n\t\t\t\t},200)\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\t// 关闭红包弹窗\r\n\t\t\tcloseRedEnvelope(){\r\n\t\t\t\tthis.windowsState = 'hide';\r\n\t\t\t\tsetTimeout(()=>{\r\n\t\t\t\t\tthis.windowsState = '';\r\n\t\t\t\t},200)\r\n\t\t\t},\r\n\t\t\tsendSystemMsg(content,type){\r\n\t\t\t\tlet lastid = this.msgList[this.msgList.length-1].msg.id;\r\n\t\t\t\tlastid++;\r\n\t\t\t\tlet row = {type:\"system\",msg:{id:lastid,type:type,content:content}};\r\n\t\t\t\tthis.screenMsg(row)\r\n\t\t\t},\r\n\t\t\t//领取详情\r\n\t\t\t// toDetails(rid){\r\n\t\t\t// \tuni.navigateTo({\r\n\t\t\t// \t\turl:'HM-details/HM-details?rid='+rid\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\t// 预览图片\r\n\t\t\tshowPic(msg){\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\tindicator:\"none\",\r\n\t\t\t\t\tcurrent:msg.message,\r\n\t\t\t\t\turls: this.msgImgList\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 播放语音\r\n\t\t\tplayVoice(msg){\r\n\t\t\t\tthis.playMsgid=msg.id;\r\n\t\t\t\tconsole.log(msg)\r\n\t\t\t\tthis.AUDIO.src = msg.message;\r\n\t\t\t\tconsole.log(msg.message)\r\n\t\t\t\tthis.$nextTick(function() {\r\n\t\t\t\t\tthis.AUDIO.play();\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t// 录音开始\r\n\t\t\tvoiceBegin(e){\r\n\t\t\t\tif(e.touches.length>1){\r\n\t\t\t\t\treturn ;\r\n\t\t\t\t}\r\n\t\t\t\tthis.initPoint.Y = e.touches[0].clientY;\r\n\t\t\t\tthis.initPoint.identifier = e.touches[0].identifier;\r\n\t\t\t\tthis.RECORDER.start({format:\"mp3\"});//录音开始,\r\n\t\t\t},\r\n\t\t\t//录音开始UI效果\r\n\t\t\trecordBegin(e){\r\n\t\t\t\tthis.recording = true;\r\n\t\t\t\tthis.voiceTis='松开 结束';\r\n\t\t\t\tthis.recordLength = 0;\r\n\t\t\t\tthis.recordTimer = setInterval(()=>{\r\n\t\t\t\t\tthis.recordLength++;\r\n\t\t\t\t},1000)\r\n\t\t\t},\r\n\t\t\t// 录音被打断\r\n\t\t\tvoiceCancel(){\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTis='按住 说话';\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\tthis.willStop = true;//不发送录音\r\n\t\t\t\tthis.RECORDER.stop();//录音结束\r\n\t\t\t},\r\n\t\t\t// 录音中(判断是否触发上滑取消发送)\r\n\t\t\tvoiceIng(e){\r\n\t\t\t\tif(!this.recording){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet touche = e.touches[0];\r\n\t\t\t\t//上滑一个导航栏的高度触发上滑取消发送\r\n\t\t\t\tif(this.initPoint.Y - touche.clientY>=uni.upx2px(100)){\r\n\t\t\t\t\tthis.willStop = true;\r\n\t\t\t\t\tthis.recordTis = '松开手指 取消发送'\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.willStop = false;\r\n\t\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t// 结束录音\r\n\t\t\tvoiceEnd(e){\r\n\t\t\t\tif(!this.recording){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tthis.recording = false;\r\n\t\t\t\tthis.voiceTis='按住 说话';\r\n\t\t\t\tthis.recordTis = '手指上滑 取消发送'\r\n\t\t\t\tthis.RECORDER.stop();//录音结束\r\n\t\t\t},\r\n\t\t\t//录音结束(回调文件)\r\n\t\t\trecordEnd(e){\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tclearInterval(that.recordTimer);\r\n\t\t\t\tif(!that.willStop){\r\n\t\t\t\t\tconsole.log(\"e: \" + JSON.stringify(e));\r\n\t\t\t\t\tlet msg = {\r\n\t\t\t\t\t\tlength:0,\r\n\t\t\t\t\t\turl:e.tempFilePath\r\n\t\t\t\t\t}\r\n\t\t\t\t\tlet min = parseInt(that.recordLength/60);\r\n\t\t\t\t\tlet sec = that.recordLength%60;\r\n\t\t\t\t\tmin = min<10?'0'+min:min;\r\n\t\t\t\t\tsec = sec<10?'0'+sec:sec;\r\n\t\t\t\t\tmsg.length = min+':'+sec;\r\n\t\t\t\t\tconsole.log(\"查看msg语音\")\r\n\t\t\t\t\tconsole.log(msg)\r\n\t\t\t\t\t// that.sendMsg(msg,'2');  //5.19\r\n\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\turl: api.UpLoad,\r\n\t\t\t\t\t\tfiles: e.tempFilePath,\r\n\t\t\t\t\t\tfilePath: e.tempFilePath,\r\n\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\tfileType: 'image',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t'app-id': wx.getAccountInfoSync().miniProgram.appId,\r\n\t\t\t\t\t\t\t'third-session': getApp().globalData.thirdSession\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\tdir: 'material',\r\n\t\t\t\t\t\t\tfileType: 'image',\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(\"上传图片结果\")\r\n\t\t\t\t\t\t\tconsole.log(res)\r\n\t\t\t\t\t\t\t//this.tempImage.push(JSON.parse(res.data).link)\r\n\t\t\t\t\t\t\tconsole.log(JSON.parse(res.data).link);\r\n\t\t\t\t\t\t\t//conosle.log(this.tempImage)\r\n\t\t\t\t\t\t\tlet user = getApp().globalData.wxUser\r\n\t\t\t\t\t\t\tlet time= new Date()\r\n\t\t\t\t\t\t\tlet message = {\r\n\t\t\t\t\t\t\t\tmessage: JSON.parse(res.data).link,\r\n\t\t\t\t\t\t\t\ttype: '2',\r\n\t\t\t\t\t\t\t\tsenderId: user.id,\r\n\t\t\t\t\t\t\t\treceiverId: \"\", //接受者Id\r\n\t\t\t\t\t\t\t\tuserAvatar: user.headimgUrl,\r\n\t\t\t\t\t\t\t\tuserName: user.nickName,\r\n\t\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\t\tstatus: '0',\r\n\t\t\t\t\t\t\t\tspeech:msg[\"length\"],\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.sendMsg(msg,message,'2');\r\n\t\t\t\t\t\t\t // that.PostSend(message)\r\n\t\t\t\t\t\t//\tthat.send(message)\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tconsole.log('取消发送录音');\r\n\t\t\t\t}\r\n\t\t\t\tthat.willStop = false;\r\n\t\t\t},\r\n\t\t\t// 切换语音/文字输入\r\n\t\t\tswitchVoice(){\r\n\t\t\t\tthis.hideDrawer();\r\n\t\t\t\tthis.isVoice = this.isVoice?false:true;\r\n\t\t\t},\r\n\t\t\tdiscard(){\r\n\t\t\t\treturn;\r\n\t\t\t},\r\n\t\t\tPostPages(currentPage) {\r\n\t\t\t\tconsole.log(currentPage);\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tlet project = getApp().globalData.projectItem\r\n\t\t\t\tlet user = getApp().globalData.wxUser\r\n\t\t\t\tlet enen = getApp().globalData.senen\r\n\t\t\t\tthat.http(api.ChattingRecords + \"/page\", 'POST', {\r\n\t\t\t\t\tcurrentPage: currentPage,\r\n\t\t\t\t\tpageSize: 20,\r\n\t\t\t\t\taffiliationId: project?project.id : enen.affId,\r\n\t\t\t\t\ttenantId: project.tenantId,\r\n\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t}, false).then(res => {\r\n\t\t\t\t\tconsole.log(\"获取历史\")\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tlet currentPage=Math.ceil(res.data.total/20)\r\n\t\t\t\t\tconsole.log(\"当前页，=\"+currentPage)\r\n\t\t\t\t\t\r\n                  that.PostPage(currentPage)\r\n\t\t\t\t  that.PostReceived()\r\n\t\t\t\t\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\tPostReceived(){\r\n\t\t\tlet that=this;\r\n\t\t\tlet project=getApp().globalData.projectItem\r\n\t\t\tlet distribution=getApp().globalData.distribution\r\n\t\t\tlet wxUser=getApp().globalData.wxUser\r\n\t\t\tthat.http(api.ChattingRecords+\"/received\",'POST',{\r\n\t\t\t\taffiliationId:project.id,\r\n\t\t\t\ttenantId:project.tenantId,\r\n\t\t\t\tuserId:wxUser.id,\r\n\t\t\t\tsalesmanId:distribution.id,\r\n\t\t\t},false).then(res=>{\r\n\t\t\t\tconsole.log(\"未读变已读\")\r\n\t\t\t\tconsole.log(res);\r\n\t\t\t})\r\n\t\t},\r\n\t\tPostPage(currentPage) {\r\n\t\t\t\tlet that = this;\r\n\t\t\t\tconsole.log(currentPage)\r\n\t\t\t\tif(currentPage<1){\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet distribution=getApp().globalData.distribution\r\n\t\t\t\tconsole.log(\"查看置业\")\r\n\t\t\t\tconsole.log(distribution)\r\n\t\t\t\tlet project = getApp().globalData.projectItem\r\n\t\t\t\tlet user = getApp().globalData.wxUser\r\n\t\t\t\tthat.http(api.ChattingRecords + \"/page\", 'POST', {\r\n\t\t\t\t\tcurrentPage: currentPage,\r\n\t\t\t\t\tpageSize: 20,\r\n\t\t\t\t\taffiliationId: project.id,\r\n\t\t\t\t\ttenantId: project.tenantId,\r\n\t\t\t\t\tuserId: user.id,\r\n\t\t\t\t}, false).then(res => {\r\n\t\t\t\t\tconsole.log(\"获取历史聊天信息\")\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tconsole.log(\"获取历史聊天信息\")\r\n\t\t\t\t\tlet messaageList = res.data.chattingRecordsVOList;\r\n\t\t\t\t\tlet messageTList = []\r\n\t\t\t\t\tconsole.log(messaageList)\r\n\t\t\t\t\tfor (let i = 0; i < messaageList.length; i++) {\r\n\t\t\t\t\t\t\tlet id = messaageList[i].id?messaageList[i].id:currentPage*100+i\r\n\t\t\t\t\t\tvar obj = {\r\n\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\tmessage: messaageList[i].messageblob,\r\n\t\t\t\t\t\t\ttype: messaageList[i].type,\r\n\t\t\t\t\t\t\tsenderId: messaageList[i].senderId,\r\n\t\t\t\t\t\t\treceiverId: messaageList[i].receiverId,\r\n\t\t\t\t\t\t\tuserAvatar: messaageList[i].senderId ==user.id? user.headimgUrl : distribution.headimgUrl,\r\n\t\t\t\t\t\t\tuserName: messaageList[i].senderId == user.id ? user.nickName :distribution.realName,\r\n\t\t\t\t\t\t\tcreateTime: messaageList[i].createTime,\r\n\t\t\t\t\t\t\tstatus: messaageList[i].status\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tmessageTList.push(obj);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t//console.log(msgList)\r\n\t\t\t\t\tthat.msgList = messageTList.concat(that.msgList);\r\n\t\t\t\t\tconsole.log(that.msgList)\r\n\t\t\t\t\tthat.currentPage=currentPage-1;\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t/**\r\n\t\t\t * 创建连接\r\n\t\t\t */\r\n\t\t\tconnect() {\r\n\t\t\t\tws.connect()\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 断开连接\r\n\t\t\t */\r\n\t\t\tdisconnect(aa) {\r\n\t\t\t\tws.disconnect()\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 订阅\r\n\t\t\t */\r\n\t\t\tsubscribe() {\r\n\t\t\t\tws.subscribe(\"/topic/chat.typing\", this.typing)\r\n\t\t\t\tws.subscribe(\"/topic/chat.message\", this.message)\r\n\t\t\t\tws.subscribe(\"/user/exchange/amq.direct/chat.message\", this.chatMessage)\r\n\t\t\t\tws.subscribe(\"/app/chat.participants\", this.participants)\r\n\t\t\t\tws.subscribe(\"/topic/chat.login\", this.login)\r\n\t\t\t\tws.subscribe(\"/topic/chat.logout\", this.logout)\r\n\t\t\t\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 取消订阅\r\n\t\t\t */\r\n\t\t\tunsubscribe() {\r\n\t\t\t\tws.unsubscribe(\"/user/topic/message\")\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tparticipants(data) {\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tconsole.log(\"---获取在线列表--\")\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\t\r\n\t\t\tlet list=JSON.parse(data.body)\r\n\t\t\t\r\n\t\t\tconsole.log(list)\r\n\t\t\tconsole.log(\"-----\")\r\n\t\t\t\t//\tthis.dataList.push(data.body)\r\n\t\t\t\tlet msg=\"\";\r\n\t\t\t\tlet time = new Date()\r\n\t\t\t\tlet project =getApp().globalData.projectItem;\r\n\t\t\t\tlet distribution= getApp().globalData.distribution\r\n\t\t\t\tconsole.log(\"查看置业\");\r\n\t\t\t\tconsole.log(distribution)\r\n\t\t\t\t\r\n\t\t\t\tconsole.log(\"______________MsgList_________________\")\r\n\t\t\t\tconsole.log(that.msgList);\r\n\t\t\t\tfor(let i =0;i<list.length;i++){\r\n\t\t\t\t\tconsole.log(list[i].username==distribution.id)\r\n\t\t\t\t\tif(list[i].username==distribution.id){  //TODO\r\n\t\t\t\t\tmsg=\"对方在线，可以聊天了\"\r\n\t\t\t\t\tlet id = time.getTime().toString()\r\n\t\t\t\t\tlet message={\r\n\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\tmessage:msg,\r\n\t\t\t\t\t\t\ttype: 5,\r\n\t\t\t\t\t\t\tsenderId: \"\",\r\n\t\t\t\t\t\t\treceiverId:\"\",\r\n\t\t\t\t\t\t\tuserAvatar: \"\",\r\n\t\t\t\t\t\t\tuserName: \"系统消息\",\r\n\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthat.msgList.push(message)\r\n\t\t\t\t\t\tlet isaddMag=true;\r\n\t\t\t\t\t\tconsole.log(\"----------------------------\")\r\n\t\t\t\t\t\tconsole.log(that.msgList)\r\n\t\t\t\t\t\tfor(let j=that.msgList.length-1;j>=0;j--){\r\n\t\t\t\t\t\t\tif(that.msgList[j][\"id\"]==\"111222333444\"){\r\n\t\t\t\t\t\t\t\tisaddMag=false;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(isaddMag){\r\n\t\t\t\t\t\t\tlet hello ={\r\n\t\t\t\t\t\t\t\tid:\"111222333444\",\r\n\t\t\t\t\t\t\t\tmessage:\"你好，我是\"+project.projectName+\"楼盘置业顾问\"+distribution.realName+\"(\"+distribution.phone+\")，很高兴为您服务，有什么问题您可以随时咨询我。\",\r\n\t\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\t\tsenderId: distribution.id,\r\n\t\t\t\t\t\t\t\treceiverId:that.wxUser.id,\r\n\t\t\t\t\t\t\t\tuserAvatar:distribution.headimgUrl,\r\n\t\t\t\t\t\t\t\tuserName: distribution.realName,\r\n\t\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tthat.msgList.push(hello)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\tthis.scrollToView = 'msg'+id;\r\n\t\t\t\t\t    }else{\r\n\t\t\t\t\t\t\tif(that.isOnce){\r\n\t\t\t\t\t\t\t\tthat.isOnce=false;\r\n\t\t\t\t\t\t\t\t msg=\"对方不在线，可以发送离线留言\";\r\n\t\t\t\t\t\t\t\tlet id = time.getTime().toString()\r\n\t\t\t\t\t\t\t\tlet message={\r\n\t\t\t\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\t\t\t\tmessage:msg,\r\n\t\t\t\t\t\t\t\t\t\ttype: 5,\r\n\t\t\t\t\t\t\t\t\t\tsenderId: \"\",\r\n\t\t\t\t\t\t\t\t\t\treceiverId:\"\",\r\n\t\t\t\t\t\t\t\t\t\tuserAvatar: \"\",\r\n\t\t\t\t\t\t\t\t\t\tuserName: \"系统消息\",\r\n\t\t\t\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t\t\t\tthat.msgList.push(message)\r\n\t\t\t\t\t\t\t\t\tlet isaddMag=true;\r\n\t\t\t\t\t\t\t\t\tfor(let j=that.msgList.length-1;j>=0;j--){\r\n\t\t\t\t\t\t\t\t\t\tif(that.msgList[j][\"id\"]==\"111222333444\"){\r\n\t\t\t\t\t\t\t\t\t\t\tisaddMag=false;\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\tif(isaddMag){\r\n\t\t\t\t\t\t\t\t\t\tlet hello ={\r\n\t\t\t\t\t\t\t\t\t\t\tid:\"111222333444\",\r\n\t\t\t\t\t\t\t\t\t\t\tmessage:\"你好，我是\"+project.projectName+\"楼盘置业顾问\"+distribution.realName+\"(\"+distribution.phone+\")，很高兴为您服务，有什么问题您可以随时咨询我。\",\r\n\t\t\t\t\t\t\t\t\t\t\ttype: 0,\r\n\t\t\t\t\t\t\t\t\t\t\tsenderId: distribution.id,\r\n\t\t\t\t\t\t\t\t\t\t\treceiverId:that.wxUser.id,\r\n\t\t\t\t\t\t\t\t\t\t\tuserAvatar:distribution.headimgUrl,\r\n\t\t\t\t\t\t\t\t\t\t\tuserName: distribution.realName,\r\n\t\t\t\t\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\tthat.msgList.push(hello)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\tthis.scrollToView = 'msg'+id;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\ttyping(data) {\r\n\t\t\t\tconsole.log(\"打字\")\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\r\n\t\t\t\t//\tthis.dataList.push(data.body)\r\n\t\t\t},\r\n\t\t\tlogin(data) {\r\n\t\t\t\tconsole.log(\"登录\")\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\t//上线信息\r\n\t\t\t\t//\tthis.dataList.push(data.body)\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tlet msg=\"对方不在线，可以发送离线留言\";\r\n\t\t\t\tlet times = new Date()\r\n\t\t\t\tlet list= JSON.parse(data.body)\r\n\t\t\t\tlet distribution=getApp().globalData.distribution\r\n\t\t\t\tif(list.username==distribution.id){\r\n\t\t\t\t\tmsg=\"对方上线提醒\"\r\n\t\t\t\t\tlet id = times.getTime().toString()\r\n\t\t\t\t\tlet message={\r\n\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\tmessage: msg ,\r\n\t\t\t\t\t\t\ttype: 5,\r\n\t\t\t\t\t\t\tsenderId: \"\",\r\n\t\t\t\t\t\t\treceiverId:\"\",\r\n\t\t\t\t\t\t\tuserAvatar: \"\",\r\n\t\t\t\t\t\t\tuserName: \"系统消息\",\r\n\t\t\t\t\t\t\tcreateTime: times.getFullYear()+\" \"+ times.getHours() +\":\"+ times.getMinutes(),\r\n\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.msgList.push(message)\r\n\t\t\t\t\tthis.scrollToView = 'msg'+id;\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tlogout(data) {\r\n\t\t\t\tconsole.log(\"登出\");\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tlet that=this;\r\n\t\t\t\t//\tthis.dataList.push(data.body)\r\n\t\t\t\tlet msg=\"\";\r\n\t\t\t\tlet time = new Date()\r\n\t\t\t\tlet list=JSON.parse(data.body)\r\n\t\t\t\tlet distribution=getApp().globalData.distribution\r\n\t\t\t\tif(list.username==distribution.id){\r\n\t\t\t\t\tmsg=\"对方离线提醒\"\r\n\t\t\t\t\tlet id = time.getTime().toString()\r\n\t\t\t\t\tlet message={\r\n\t\t\t\t\t\t\tid:id,\r\n\t\t\t\t\t\t\tmessage: msg ,\r\n\t\t\t\t\t\t\ttype: 5,\r\n\t\t\t\t\t\t\tsenderId: \"\",\r\n\t\t\t\t\t\t\treceiverId:\"\",\r\n\t\t\t\t\t\t\tuserAvatar: \"\",\r\n\t\t\t\t\t\t\tuserName: \"系统消息\",\r\n\t\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tthat.msgList.push(message)\r\n\t\t\t\t\tthis.scrollToView = 'msg'+id;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t\t\r\n\t\t\t},\r\n\t\t\tchatMessage(data) {\r\n\t\t\t\tlet that=this;\r\n\t\t\t\tconsole.log(\"dddddd\")\r\n\t\t\t\tconsole.log(data)\r\n\t\t\t\tconsole.log(\"--------------------------------------\")\r\n\t\t\t\tlet JSONMage = JSON.parse(data.body)\r\n\t\t\t\tconsole.log(JSONMage)\r\n\t\t\t\tconsole.log(\"--------------------------------------\")\r\n\t\t\t\t\r\n\t\t\t\tlet time = new Date()\r\n\t\t\t\tlet message={\r\n\t\t\t\t\t\tid:time.getTime().toString(),\r\n\t\t\t\t\t\tmessage: JSONMage.message,\r\n\t\t\t\t\t\ttype: JSONMage.type,\r\n\t\t\t\t\t\tsenderId: JSONMage.id,\r\n\t\t\t\t\t\treceiverId:that.wxUser.id,\r\n\t\t\t\t\t\tuserAvatar: JSONMage.userAvatar,\r\n\t\t\t\t\t\tuserName: JSONMage.userName,\r\n\t\t\t\t\t\tcreateTime: time.getFullYear()+\" \"+time.getHours()+\":\"+ time.getMinutes(),\r\n\t\t\t\t\t\tstatus: '0'\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthat.msgList.push(message)\r\n\t\t\t\tthis.scrollToView = 'msg'+time.getTime().toString();\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 接收消息\r\n\t\t\t * @param {Object} data\r\n\t\t\t */\r\n\t\t\tmessage(data) {\r\n\t\t\t\tconsole.log(\"小明\")\r\n\t\t\t\tconsole.log(data.body)\t\t\t\r\n\t\t\t\t//this.dataList.push(meassage)\r\n\t\t\t},\r\n\t\t\t/**\r\n\t\t\t * 向服务端发送消息\r\n\t\t\t */\r\n\t\t\tsend(message) {\r\n\t\t\t\tconsole.log(\"向服务端发送消息\")\r\n\t\t\t\tconsole.log(message);\r\n\t\t\t\r\n\t\t\t\t//let userId = message.salesmanId;\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t\t//client.send('/app/chat.message', {}, JSON.stringify({ message: 'newMessage' }));\r\n\t\t\t\t//  1301357596194103298\r\n\t\t\t\t//  '1318816369681346562'\r\n\t\t\t\tlet distribution=getApp().globalData.distribution\r\n\t\t\t\t//getApp().globalData.distribution\r\n\t\t\t\tlet wxUser = getApp().globalData.wxUser\r\n\t\t\t\t\r\n\t\t\t\tws.send(\"/app/chat.private/\"+distribution.id, JSON.stringify({\r\n\t\t\t\t\tmessage: message.message,\r\n\t\t\t\t\ttype: message.type,\r\n\t\t\t\t\tuserAvatar: message.userAvatar,\r\n\t\t\t\t\tuserName: message.userName,\r\n\t\t\t\t\tid: wxUser.id,\r\n\t\t\t\t\t// speech: parseInt(message.speech.split(\":\")[1])|| 0, \r\n\t\t\t\t\trecordId:message.recordId ,\r\n\t\t\t\t}))\r\n\t\t\t},\r\n\t\t\r\n\t\t}\r\n\t}\r\n</script>\r\n<style lang=\"scss\">\r\n\t@import \"static/HM-chat/css/style.scss\"; \r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./home.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1629702872865\n      var cssReload = require(\"D:/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}