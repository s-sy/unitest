require('../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pagestwo/layoutDetails/home"],{272:
/*!************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/project/项目/unitest/main.js?{"page":"pagestwo%2FlayoutDetails%2Fhome"} ***!
  \************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){o(/*! uni-pages */4);n(o(/*! vue */2));var t=n(o(/*! ./pagestwo/layoutDetails/home.vue */273));function n(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["createPage"])},273:
/*!*****************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue ***!
  \*****************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! ./home.vue?vue&type=template&id=614cb0c2& */274),a=o(/*! ./home.vue?vue&type=script&lang=js& */276);for(var i in a)"default"!==i&&function(e){o.d(t,e,(function(){return a[e]}))}(i);o(/*! ./home.vue?vue&type=style&index=0&lang=css& */278);var r,l=o(/*! ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js */10),s=Object(l["default"])(a["default"],n["render"],n["staticRenderFns"],!1,null,null,null,!1,n["components"],r);s.options.__file="pagestwo/layoutDetails/home.vue",t["default"]=s.exports},274:
/*!************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=template&id=614cb0c2& ***!
  \************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=template&id=614cb0c2& */275);o.d(t,"render",(function(){return n["render"]})),o.d(t,"staticRenderFns",(function(){return n["staticRenderFns"]})),o.d(t,"recyclableRender",(function(){return n["recyclableRender"]})),o.d(t,"components",(function(){return n["components"]}))},275:
/*!************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--16-0!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=template&id=614cb0c2& ***!
  \************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! exports provided: render, staticRenderFns, recyclableRender, components */function(e,t,o){"use strict";o.r(t),o.d(t,"render",(function(){return a})),o.d(t,"staticRenderFns",(function(){return r})),o.d(t,"recyclableRender",(function(){return i})),o.d(t,"components",(function(){return n}));var n={tag:function(){return o.e(/*! import() | components/tag/tag */"components/tag/tag").then(o.bind(null,/*! @/components/tag/tag.vue */391))}},a=function(){var e=this,t=e.$createElement,o=(e._self._c,e._f("pricetatilfilter")(e.recommendItem));e.$mp.data=Object.assign({},{$root:{f0:o}})},i=!1,r=[];a._withStripped=!0},276:
/*!******************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=script&lang=js& ***!
  \******************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=script&lang=js& */277),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},277:
/*!*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/babel-loader/lib!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--12-1!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=script&lang=js& ***!
  \*************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=r(o(/*! ./node_modules/@babel/runtime/regenerator */18)),a=r(o(/*! ../../utils/initPage.js */21)),i=r(o(/*! ../../pages/api/home.js */11));function r(e){return e&&e.__esModule?e:{default:e}}function l(e,t,o,n,a,i,r){try{var l=e[i](r),s=l.value}catch(c){return void o(c)}l.done?t(s):Promise.resolve(s).then(n,a)}function s(e){return function(){var t=this,o=arguments;return new Promise((function(n,a){var i=e.apply(t,o);function r(e){l(i,n,a,r,s,"next",e)}function s(e){l(i,n,a,r,s,"throw",e)}r(void 0)}))}}function c(e,t){var o;if("undefined"===typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(o=u(e))||t&&e&&"number"===typeof e.length){o&&(e=o);var n=0,a=function(){};return{s:a,n:function(){return n>=e.length?{done:!0}:{done:!1,value:e[n++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,r=!0,l=!1;return{s:function(){o=e[Symbol.iterator]()},n:function(){var e=o.next();return r=e.done,e},e:function(e){l=!0,i=e},f:function(){try{r||null==o.return||o.return()}finally{if(l)throw i}}}}function u(e,t){if(e){if("string"===typeof e)return d(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?d(e,t):void 0}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,n=new Array(t);o<t;o++)n[o]=e[o];return n}var g={data:function(){return{popupadsData:"",popupaShow:"",followDatas:"",plState:!1,layoutValue:"",recommendItem:{id:""},isShowTX:"",painting:{},shareImage:"",modalName:"",imageWidth:0,imageHeight:0,Qcode:"",neiImgeHeighte:1,neiImgeWidth:1,baseBudding:"",wxUser:"",ordinal:null,userList:"",projectItem:{id:""}}},computed:{tagData:function(){var e=this.recommendItem;if(e&&e.keywords)return(e.keywords||"").split(" ")},guanZ:function(){var e=this.followDatas,t=this.recommendItem;if(t&&e&&e.length>0){console.log("------------"),console.log(e),console.log(t),console.log("------------");for(var o=!1,n=0,a=e.length;n<a;n++)e[n].apartmentLayout&&e[n].apartmentLayout.id===t.id&&(o=!0);return o}return!1}},filters:{pricetatilfilter:function(e){var t=getApp().globalData.BaseBudding;if(e&&t&&t.price){var o=parseFloat(t.price),n=parseFloat(e.floorage),a=parseFloat(e.price),i=(n*a/1e4).toFixed(2);return i&&"NaN"!=i||(i=(n*o/1e4).toFixed(2)),i&&"NaN"!=i?"约"+i+"万/套":"总价待定"}}},methods:{getPopupads:function(){var e=this;e.http(i.default.Popupads,"GET",{},!1).then((function(t){console.log("弹框"),console.log(t),t&&(e.popupadsData=t.data)}))},getUserProfile:function(e){var t=this;wx.getUserProfile({desc:"用于完善会员资料",success:function(e){t.getwxUser(e)}})},hideModal:function(){this.modalName=""},userInfoGets:function(){var e=this;this.http(i.default.userInfoGet,"GET",{},!1).then((function(t){e.wxUser=t.data,console.log(t),getApp().globalData.wxUser=t.data}))},eventDraw:function(){if(wx.showLoading({title:"分享图片生成中",mask:!0}),this.shareImage)return wx.hideLoading(),void(this.modalName="Image");var e=parseInt(getApp().globalData.BaseBudding.price),t=Math.floor(10*Math.random()),o=getApp().globalData.wxUser,n="均价："+this.recommendItem.price+"/㎡",a=10*parseInt(this.recommendItem.price);n=a?"均价："+this.recommendItem.price+"/㎡":e?"均价："+e+"/㎡":"均价：待定",this.painting={width:375,height:555,clear:!0,views:[{type:"image",url:"https://img.0728jh.com/staticImg/haibaobao"+t+".png",top:0,left:0,width:375,height:555},{type:"image",url:o.headimgUrl,top:27.5,left:29,width:55,height:55},{type:"image",url:"https://img.0728jh.com/staticImg/huangtukuang"+t+".png",top:27.5,left:29,width:55,height:55},{type:"text",content:"您的好友【"+o.nickName+"】",fontSize:16,color:"#402D16",textAlign:"left",top:33,left:96,bolder:!0,MaxLineNumber:1,breakWord:!0,width:250},{type:"text",content:"向您推荐"+this.baseBudding.projectName+this.recommendItem.name,fontSize:15,color:"#563D20",textAlign:"left",top:59.5,left:96},{type:"image",url:this.recommendItem.src,top:136,left:178.5-186*this.neiImgeWidth/this.neiImgeHeighte/2,width:186*this.neiImgeWidth/this.neiImgeHeighte,height:186},{type:"image",url:this.Qcode,top:435,left:80,width:80,height:80},{type:"text",content:this.recommendItem.name+" "+this.recommendItem.type,fontSize:16,lineHeight:21,color:"#383549",textAlign:"left",top:336,left:178.5-186*this.neiImgeWidth/this.neiImgeHeighte/2,width:287,MaxLineNumber:2,breakWord:!0,bolder:!0},{type:"text",content:n,fontSize:19,color:"#E62004",textAlign:"left",top:387,left:66,bolder:!0},{type:"text",content:"面积:"+this.recommendItem.floorage+"㎡",fontSize:14,color:"#383549",textAlign:"left",top:391,left:250},{type:"text",content:"长按识别图中二维码了解"+this.baseBudding.projectName,fontSize:14,color:"#383549",textAlign:"left",top:460,left:165.5,lineHeight:20,MaxLineNumber:2,breakWord:!0,width:125}]}},eventSave:function(){this.hideModal(),console.log(this.shareImage),wx.saveImageToPhotosAlbum({filePath:this.shareImage,success:function(e){wx.showToast({title:"保存图片成功",icon:"success",duration:2e3})}})},eventGetImage:function(t){var o=this;console.log(t),wx.hideLoading(),console.log(t.detail.tempFilePath),console.log(this),e.getImageInfo({src:t.detail.tempFilePath,success:function(e){console.log("图片宽高"),console.log(e),o.imageWidth=e.width,o.imageHeight=e.height},fail:function(){console.log("图片宽高获取失败")}}),o.shareImage=t.detail.tempFilePath,o.modalName="Image"},callphone:function(){var t=this,o=getApp().globalData.BaseBudding,n=getApp().globalData.wxUser,a=t.userList,i="";if(console.log(o),console.log(n),console.log(a),"1"==n.userType)i=n.phone;else if("0"==n.userType){var r=n.invitee;if(r){var l,s=c(a);try{for(s.s();!(l=s.n()).done;){var u=l.value;u.id==r&&(i=u.phone)}}catch(d){s.e(d)}finally{s.f()}}}else i=o.premisesMobile;e.makePhoneCall({phoneNumber:i})},getUserList:function(){var e=this;e.http(i.default.UserInfo,"GET",{current:1,size:50,userType:"1"},!1).then((function(t){console.log("置业顾问"),console.log(t),e.userList=t.data.records}))},togofang:function(){e.redirectTo({url:"../../pages/index/index?PageCur=contactUs"})},toRecommend:function(){e.redirectTo({url:"../../pages/index/index?PageCur=recommend"})},previewImage:function(){console.log("预览");var t=(this.recommendItem.src||"").split(" ");e.previewImage({current:0,urls:t})},isAuth:function(){getApp().globalData.wxUser.nickName||e.showToast({title:"请先授权",icon:"none",duration:3e3})},getwxUser:function(e){var t=this;t.http(i.default.wxUserSave,"POST",e,!1).then((function(e){console.log(e),t.userInfoGets()}))},goconcern:function(){var e=this;e.http(i.default.ApartmentConcern,"POST",{id:e.recommendItem.id,attentionType:"6",userId:getApp().globalData.wxUser.id,affiliationId:getApp().globalData.projectItem.id},!1).then((function(t){console.log("关注"),console.log(t),e.getApartmentConcern()}))},getlayoutValue:function(e){this.layoutValue=e.detail.value},tofangdai:function(){e.navigateTo({url:"../../pages/house_loan_calculator/house_loan_calculator"})},topl:function(){this.isAuth(),this.plState=!this.plState},commit:function(){this.isAuth(),this.plState=!1,this.ReviewsCommit()},cancel:function(){this.plState=!1},getrecommendItem:function(t){var o=this,n=t||o.recommendItem.id;o.http(i.default.ApartmentLayout,"GET",{id:n},!1).then((function(t){console.log("户型详情"),console.log(t),o.recommendItem=t.data.records[0],e.getImageInfo({src:t.data.records[0].src,success:function(e){console.log("户型图大小"),console.log(e),o.neiImgeHeighte=e.height,o.neiImgeWidth=e.width}})}))},getrecommendItembyordinal:function(t){var o=this;o.http(i.default.ApartmentLayout,"GET",{ordinal:t},!1).then((function(t){console.log("户型详情"),console.log(t),o.recommendItem=t.data.records[0],e.getImageInfo({src:t.data.records[0].src,success:function(e){console.log("户型图大小"),console.log(e),o.neiImgeHeighte=e.height,o.neiImgeWidth=e.width}})}))},getApartmentConcern:function(){var e=this;console.log(),this.http(i.default.getApartmentConcern2,"GET",{attentionType:"6",userId:getApp().globalData.wxUser.id,affiliationId:getApp().globalData.projectItem.id},!1).then((function(t){console.log("我的关注列表"),console.log(t),e.followDatas=t.data}))},getBaseBudding:function(){var e=this,t=this,o=t.projectItem.id||getApp().globalData.projectItem.id;t.http(i.default.BaseBudiing+"/get/"+o,"GET",{},!1).then((function(t){console.log("楼盘基本信息"),console.log(t),e.baseBudding=t.data,getApp().globalData.BaseBudding=t.data}))},ReviewsCommit:function(){var e=this,t=e.layoutValue.replace(/\s*/g,"");t&&(console.log(e.layoutValue),e.http(i.default.Topicreply,"POST",{replyTypes:3,typesId:e.recommendItem.id,details:e.layoutValue,replyClass:e.recommendItem.createId==getApp().globalData.wxUser.id?"1":"0"},!1).then((function(t){console.log("写回复"),console.log(t),e.getrecommendItem()})))},getShareCode:function(){var e=this,t="",o=getApp().globalData.wxUser,n=getApp().globalData.projectItem&&getApp().globalData.projectItem.affiliationCode?getApp().globalData.projectItem:getApp().globalData.BaseBudding;t="age_"+n.affiliationCode+"_"+o.userCode;var a=t+"_"+e.recommendItem.ordinal;console.log("查看scenen"),console.log(a),e.http(i.default.ShareCode,"POST",{scene:a,page:"pagestwo/layoutDetails/home"},!1).then((function(t){if(console.log("ShareCode"),console.log(t),0==t.code){var o=wx.getFileSystemManager(),n="tmp_img_src",a="".concat(wx.env.USER_DATA_PATH,"/").concat(n,".jpg");o.writeFile({filePath:a,data:t.data,encoding:"base64",success:function(t){console.log("dizhi"),console.log(a),e.Qcode=a,e.eventDraw()},fail:function(){}})}}))},Jiema:function(e,t,o){var n=this;return new Promise((function(a,r){n.http(i.default.Jiema,"GET",{aff:t,user:o,scene:e},!1).then((function(e){console.log("解码"),console.log(e),a(e)}))}))}},onShareAppMessage:function(){var e=getApp().globalData.BaseBudding,t="",o=getApp().globalData.wxUser;t=o.id;var n=getApp().globalData.projectItem,a=n.affiliationCode||this.affCode,i="age_"+a+"_"+o.userCode;return i=i+"_"+this.recommendItem.ordinal,{title:e.projectName,path:"/pagestwo/layoutDetails/home?invitee="+t+"&scene="+i}},onLoad:function(e){var t=this;return s(n.default.mark((function o(){var i,r,l,s,c;return n.default.wrap((function(o){while(1)switch(o.prev=o.next){case 0:if(i=t,console.log("户型详情options"),console.log(e),!e.scene){o.next=20;break}return r=decodeURIComponent(e.scene),l=r.split("_"),o.next=8,i.Jiema(l[0],l[1],l[2]);case 8:s=o.sent,console.log(l),console.log("++++++++++++++++++++++++"),console.log(s),s.data["senen"]=l[0],i.affCode=l[1],c={id:s.data.affId},getApp().globalData.projectItem=c,console.log(s.data),getApp().globalData.senen=s.data,getApp().globalData.invitee=s.data.userId,t.ordinal=parseInt(l[3]);case 20:e.id&&(t.recommendItem.id=e.id),e.invitee&&(getApp().globalData.invitee=e.invitee),t.isShowTx="0"==getApp().globalData.interaction,a.default.initPage().then((function(o){console.log("查看缓存"),t.popupaShow=null==getApp().globalData.popupaShow||getApp().globalData.popupaShow,t.wxUser=getApp().globalData.wxUser,t.getApartmentConcern(),null!=t.ordinal?(console.log("走ordinal"),t.getrecommendItembyordinal(t.ordinal)):(console.log("走sid"),t.getrecommendItem(e.id)),t.getPopupads(),t.getBaseBudding(),t.getUserList()}));case 24:case"end":return o.stop()}}),o)})))()}};t.default=g}).call(this,o(/*! ./node_modules/@dcloudio/uni-mp-weixin/dist/index.js */1)["default"])},278:
/*!**************************************************************************************************************************!*\
  !*** C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=style&index=0&lang=css& ***!
  \**************************************************************************************************************************/
/*! no static exports found */function(e,t,o){"use strict";o.r(t);var n=o(/*! -!./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./home.vue?vue&type=style&index=0&lang=css& */279),a=o.n(n);for(var i in n)"default"!==i&&function(e){o.d(t,e,(function(){return n[e]}))}(i);t["default"]=a.a},279:
/*!******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!./node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader??ref--6-oneOf-1-2!./node_modules/postcss-loader/src??ref--6-oneOf-1-3!./node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib??vue-loader-options!./node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!C:/Users/Administrator/Desktop/project/项目/unitest/pagestwo/layoutDetails/home.vue?vue&type=style&index=0&lang=css& ***!
  \******************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/*! no static exports found */function(e,t,o){}},[[272,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pagestwo/layoutDetails/home.js.map